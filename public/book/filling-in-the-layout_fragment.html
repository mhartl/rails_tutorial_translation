

<h1 class="title">Ruby on Rails Tutorial </h1>


<h1 class="subtitle">  Learn Rails by Example</h1>


<h2 class="author">Michael Hartl</h2>




<h1 class="contents">Contents</h1>


<div id="table_of_contents"><ol><li class="chapter"><a href="beginning#top"><span class="number">Chapter 1</span> From zero to deploy</a></li><li><ol><li class="section"><a href="beginning#sec:introduction"><span class="number">1.1</span> Introduction</a></li><li><ol><li class="subsection"><a href="beginning#sec:comments_for_various_readers"><span class="number">1.1.1</span> Comments for various readers</a></li><li class="subsection"><a href="beginning#sec:1.1.2"><span class="number">1.1.2</span> &ldquo;Scaling&rdquo; Rails</a></li><li class="subsection"><a href="beginning#sec:conventions"><span class="number">1.1.3</span> Conventions in this book</a></li></ol></li><li class="section"><a href="beginning#sec:up_and_running"><span class="number">1.2</span> Up and running</a></li><li><ol><li class="subsection"><a href="beginning#sec:development_tools"><span class="number">1.2.1</span> Development environments</a></li><li><ol><li class="subsubsection"><a href="beginning#sec:1.2.1.1">IDEs</a></li><li class="subsubsection"><a href="beginning#sec:1.2.1.2">Text editors and command lines</a></li><li class="subsubsection"><a href="beginning#sec:1.2.1.3">Browsers</a></li><li class="subsubsection"><a href="beginning#sec:1.2.1.4">A note about tools</a></li></ol></li><li class="subsection"><a href="beginning#sec:rubygems"><span class="number">1.2.2</span> Ruby, RubyGems, Rails, and Git</a></li><li><ol><li class="subsubsection"><a href="beginning#sec:rails_installer_windows">Rails Installer (Windows)</a></li><li class="subsubsection"><a href="beginning#sec:install_git">Install Git</a></li><li class="subsubsection"><a href="beginning#sec:install_ruby">Install Ruby</a></li><li class="subsubsection"><a href="beginning#sec:install_rubygems">Install RubyGems</a></li><li class="subsubsection"><a href="beginning#sec:install_rails">Install Rails</a></li></ol></li><li class="subsection"><a href="beginning#sec:the_first_application"><span class="number">1.2.3</span> The first application</a></li><li class="subsection"><a href="beginning#sec:bundler"><span class="number">1.2.4</span> Bundler</a></li><li class="subsection"><a href="beginning#sec:rails_server"><span class="number">1.2.5</span> <code>rails server</code></a></li><li class="subsection"><a href="beginning#sec:mvc"><span class="number">1.2.6</span> Model-view-controller (MVC)</a></li></ol></li><li class="section"><a href="beginning#sec:version_control"><span class="number">1.3</span> Version control with Git</a></li><li><ol><li class="subsection"><a href="beginning#sec:git_setup"><span class="number">1.3.1</span> Installation and setup</a></li><li><ol><li class="subsubsection"><a href="beginning#sec:1.3.1.1">First-time system setup</a></li><li class="subsubsection"><a href="beginning#sec:1.3.1.2">First-time repository setup</a></li></ol></li><li class="subsection"><a href="beginning#sec:adding_and_committing"><span class="number">1.3.2</span> Adding and committing</a></li><li class="subsection"><a href="beginning#sec:1.3.3"><span class="number">1.3.3</span> What good does Git do you?</a></li><li class="subsection"><a href="beginning#sec:github"><span class="number">1.3.4</span> GitHub</a></li><li class="subsection"><a href="beginning#sec:git_commands"><span class="number">1.3.5</span> Branch, edit, commit, merge</a></li><li><ol><li class="subsubsection"><a href="beginning#sec:git_branch">Branch</a></li><li class="subsubsection"><a href="beginning#sec:git_edit">Edit</a></li><li class="subsubsection"><a href="beginning#sec:git_commit">Commit</a></li><li class="subsubsection"><a href="beginning#sec:git_merge">Merge</a></li><li class="subsubsection"><a href="beginning#sec:git_push">Push</a></li></ol></li></ol></li><li class="section"><a href="beginning#sec:deploying"><span class="number">1.4</span> Deploying</a></li><li><ol><li class="subsection"><a href="beginning#sec:1.4.1"><span class="number">1.4.1</span> Heroku setup</a></li><li class="subsection"><a href="beginning#sec:heroku_step_one"><span class="number">1.4.2</span> Heroku deployment, step one</a></li><li class="subsection"><a href="beginning#sec:1.4.3"><span class="number">1.4.3</span> Heroku deployment, step two</a></li><li class="subsection"><a href="beginning#sec:heroku_commands"><span class="number">1.4.4</span> Heroku commands</a></li></ol></li><li class="section"><a href="beginning#sec:beginning_conclusion"><span class="number">1.5</span> Conclusion</a></li></ol></li><li class="chapter"><a href="a-demo-app#top"><span class="number">Chapter 2</span> A demo app</a></li><li><ol><li class="section"><a href="a-demo-app#sec:planning_the_application"><span class="number">2.1</span> Planning the application</a></li><li><ol><li class="subsection"><a href="a-demo-app#sec:modeling_users"><span class="number">2.1.1</span> Modeling users</a></li><li class="subsection"><a href="a-demo-app#sec:modeling_microposts"><span class="number">2.1.2</span> Modeling microposts</a></li></ol></li><li class="section"><a href="a-demo-app#sec:demo_users_resource"><span class="number">2.2</span> The Users resource</a></li><li><ol><li class="subsection"><a href="a-demo-app#sec:a_user_tour"><span class="number">2.2.1</span> A user tour</a></li><li class="subsection"><a href="a-demo-app#sec:mvc_in_action"><span class="number">2.2.2</span> MVC in action</a></li><li class="subsection"><a href="a-demo-app#sec:weaknesses_of_this_users_resource"><span class="number">2.2.3</span> Weaknesses of this Users resource</a></li></ol></li><li class="section"><a href="a-demo-app#sec:microposts_resource"><span class="number">2.3</span> The Microposts resource</a></li><li><ol><li class="subsection"><a href="a-demo-app#sec:a_micropost_microtour"><span class="number">2.3.1</span> A micropost microtour</a></li><li class="subsection"><a href="a-demo-app#sec:putting_the_micro_in_microposts"><span class="number">2.3.2</span> Putting the <em>micro</em> in microposts</a></li><li class="subsection"><a href="a-demo-app#sec:demo_user_has_many_microposts"><span class="number">2.3.3</span> A user <code>has_many</code> microposts</a></li><li class="subsection"><a href="a-demo-app#sec:inheritance_hierarchies"><span class="number">2.3.4</span> Inheritance hierarchies</a></li><li class="subsection"><a href="a-demo-app#sec:deploying_the_demo_app"><span class="number">2.3.5</span> Deploying the demo app</a></li></ol></li><li class="section"><a href="a-demo-app#sec:2.4"><span class="number">2.4</span> Conclusion</a></li></ol></li><li class="chapter"><a href="static-pages#top"><span class="number">Chapter 3</span> Mostly static pages</a></li><li><ol><li class="section"><a href="static-pages#sec:static_pages"><span class="number">3.1</span> Static pages</a></li><li><ol><li class="subsection"><a href="static-pages#sec:truly_static_pages"><span class="number">3.1.1</span> Truly static pages</a></li><li class="subsection"><a href="static-pages#sec:static_pages_with_rails"><span class="number">3.1.2</span> Static pages with Rails</a></li></ol></li><li class="section"><a href="static-pages#sec:first_tests"><span class="number">3.2</span> Our first tests</a></li><li><ol><li class="subsection"><a href="static-pages#sec:testing_tools"><span class="number">3.2.1</span> Testing tools</a></li><li><ol><li class="subsubsection"><a href="static-pages#sec:autotest">Autotest</a></li></ol></li><li class="subsection"><a href="static-pages#sec:TDD"><span class="number">3.2.2</span> TDD: Red, Green, Refactor</a></li><li><ol><li class="subsubsection"><a href="static-pages#sec:spork">Spork</a></li><li class="subsubsection"><a href="static-pages#sec:red">Red</a></li><li class="subsubsection"><a href="static-pages#sec:green">Green</a></li><li class="subsubsection"><a href="static-pages#sec:refactor">Refactor</a></li></ol></li></ol></li><li class="section"><a href="static-pages#sec:slightly_dynamic_pages"><span class="number">3.3</span> Slightly dynamic pages</a></li><li><ol><li class="subsection"><a href="static-pages#sec:testing_a_title_change"><span class="number">3.3.1</span> Testing a title change</a></li><li class="subsection"><a href="static-pages#sec:passing_title_tests"><span class="number">3.3.2</span> Passing title tests</a></li><li class="subsection"><a href="static-pages#sec:instance_variables_embedded_ruby"><span class="number">3.3.3</span> Instance variables and Embedded Ruby</a></li><li class="subsection"><a href="static-pages#sec:layouts"><span class="number">3.3.4</span> Eliminating duplication with layouts</a></li></ol></li><li class="section"><a href="static-pages#sec:static_pages_conclusion"><span class="number">3.4</span> Conclusion</a></li><li class="section"><a href="static-pages#sec:static_pages_exercises"><span class="number">3.5</span> Exercises</a></li></ol></li><li class="chapter"><a href="rails-flavored-ruby#top"><span class="number">Chapter 4</span> Rails-flavored Ruby</a></li><li><ol><li class="section"><a href="rails-flavored-ruby#sec:motivation"><span class="number">4.1</span> Motivation</a></li><li><ol><li class="subsection"><a href="rails-flavored-ruby#sec:title_helper"><span class="number">4.1.1</span> A <code>title</code> helper</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:cascading_style_sheets"><span class="number">4.1.2</span> Cascading Style Sheets</a></li></ol></li><li class="section"><a href="rails-flavored-ruby#sec:strings_and_methods"><span class="number">4.2</span> Strings and methods</a></li><li><ol><li class="subsection"><a href="rails-flavored-ruby#sec:comments"><span class="number">4.2.1</span> Comments</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:strings"><span class="number">4.2.2</span> Strings</a></li><li><ol><li class="subsubsection"><a href="rails-flavored-ruby#sec:printing">Printing</a></li><li class="subsubsection"><a href="rails-flavored-ruby#sec:single_quoted_strings">Single-quoted strings</a></li></ol></li><li class="subsection"><a href="rails-flavored-ruby#sec:objects_and_message_passing"><span class="number">4.2.3</span> Objects and message passing</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:method_definitions"><span class="number">4.2.4</span> Method definitions</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:back_to_the_title_helper"><span class="number">4.2.5</span> Back to the <code>title</code> helper</a></li></ol></li><li class="section"><a href="rails-flavored-ruby#sec:other_data_structures"><span class="number">4.3</span> Other data structures</a></li><li><ol><li class="subsection"><a href="rails-flavored-ruby#sec:arrays_and_ranges"><span class="number">4.3.1</span> Arrays and ranges</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:blocks"><span class="number">4.3.2</span> Blocks</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:hashes_and_symbols"><span class="number">4.3.3</span> Hashes and symbols</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:css_revisited"><span class="number">4.3.4</span> CSS revisited</a></li></ol></li><li class="section"><a href="rails-flavored-ruby#sec:ruby_classes"><span class="number">4.4</span> Ruby classes</a></li><li><ol><li class="subsection"><a href="rails-flavored-ruby#sec:constructors"><span class="number">4.4.1</span> Constructors</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:a_class_of_our_own"><span class="number">4.4.2</span> Class inheritance</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:modifying_built_in_classes"><span class="number">4.4.3</span> Modifying built-in classes</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:a_controller_class"><span class="number">4.4.4</span> A controller class</a></li><li class="subsection"><a href="rails-flavored-ruby#sec:a_user_class"><span class="number">4.4.5</span> A user class</a></li></ol></li><li class="section"><a href="rails-flavored-ruby#sec:exercises"><span class="number">4.5</span> Exercises</a></li></ol></li><li class="chapter"><a href="filling-in-the-layout#top"><span class="number">Chapter 5</span> Filling in the layout</a></li><li><ol><li class="section"><a href="filling-in-the-layout#sec:structure"><span class="number">5.1</span> Adding some structure</a></li><li><ol><li class="subsection"><a href="filling-in-the-layout#sec:adding_to_the_layout"><span class="number">5.1.1</span> Site navigation</a></li><li class="subsection"><a href="filling-in-the-layout#sec:custom_css"><span class="number">5.1.2</span> Custom CSS</a></li><li class="subsection"><a href="filling-in-the-layout#sec:partials"><span class="number">5.1.3</span> Partials</a></li></ol></li><li class="section"><a href="filling-in-the-layout#sec:layout_links"><span class="number">5.2</span> Layout links</a></li><li><ol><li class="subsection"><a href="filling-in-the-layout#sec:integration_tests"><span class="number">5.2.1</span> Integration tests</a></li><li class="subsection"><a href="filling-in-the-layout#sec:rails_routes"><span class="number">5.2.2</span> Rails routes</a></li><li class="subsection"><a href="filling-in-the-layout#sec:named_routes"><span class="number">5.2.3</span> Named routes</a></li></ol></li><li class="section"><a href="filling-in-the-layout#sec:user_signup"><span class="number">5.3</span> User signup: A first step</a></li><li><ol><li class="subsection"><a href="filling-in-the-layout#sec:users_controller"><span class="number">5.3.1</span> Users controller</a></li><li class="subsection"><a href="filling-in-the-layout#sec:signup_url"><span class="number">5.3.2</span> Signup URL</a></li></ol></li><li class="section"><a href="filling-in-the-layout#sec:layout_conclusion"><span class="number">5.4</span> Conclusion</a></li><li class="section"><a href="filling-in-the-layout#sec:layout_exercises"><span class="number">5.5</span> Exercises</a></li></ol></li><li class="chapter"><a href="modeling-and-viewing-users-one#top"><span class="number">Chapter 6</span> Modeling and viewing users, part I</a></li><li><ol><li class="section"><a href="modeling-and-viewing-users-one#sec:user_model"><span class="number">6.1</span> User model</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-one#sec:database_migrations"><span class="number">6.1.1</span> Database migrations</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:the_model_file"><span class="number">6.1.2</span> The model file</a></li><li><ol><li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:model_annotation">Model annotation</a></li><li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:accessible_attributes">Accessible attributes</a></li></ol></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:creating_user_objects"><span class="number">6.1.3</span> Creating user objects</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:finding_user_objects"><span class="number">6.1.4</span> Finding user objects</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:updating_user_objects"><span class="number">6.1.5</span> Updating user objects</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-one#sec:user_validations"><span class="number">6.2</span> User validations</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-one#sec:presence_validation"><span class="number">6.2.1</span> Validating presence</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:length_validation"><span class="number">6.2.2</span> Length validation</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:format_validation"><span class="number">6.2.3</span> Format validation</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:uniqueness_validation"><span class="number">6.2.4</span> Uniqueness validation</a></li><li><ol><li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:the_caveat">The uniqueness caveat</a></li></ol></li></ol></li><li class="section"><a href="modeling-and-viewing-users-one#sec:viewing_users"><span class="number">6.3</span> Viewing users</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-one#sec:rails_environments"><span class="number">6.3.1</span> Debug and Rails environments</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:users_show"><span class="number">6.3.2</span> User model, view, controller</a></li><li class="subsection"><a href="modeling-and-viewing-users-one#sec:a_users_resource"><span class="number">6.3.3</span> A Users resource</a></li><li><ol><li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:params_in_debug"><code>params</code> in <code>debug</code></a></li></ol></li></ol></li><li class="section"><a href="modeling-and-viewing-users-one#sec:6.4"><span class="number">6.4</span> Conclusion</a></li><li class="section"><a href="modeling-and-viewing-users-one#sec:6.5"><span class="number">6.5</span> Exercises</a></li></ol></li><li class="chapter"><a href="modeling-and-viewing-users-two#top"><span class="number">Chapter 7</span> Modeling and viewing users, part II</a></li><li><ol><li class="section"><a href="modeling-and-viewing-users-two#sec:insecure_passwords"><span class="number">7.1</span> Insecure passwords</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-two#sec:password_validations"><span class="number">7.1.1</span> Password validations</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:password_migration"><span class="number">7.1.2</span> A password migration</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:an_active_record_callback"><span class="number">7.1.3</span> An Active Record callback</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-two#sec:secure_passwords"><span class="number">7.2</span> Secure passwords</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_secure_password_test"><span class="number">7.2.1</span> A secure password test</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:secure_password_theory"><span class="number">7.2.2</span> Some secure password theory</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:implementing_has_password"><span class="number">7.2.3</span> Implementing <code>has_password?</code></a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:an_authenticate_method"><span class="number">7.2.4</span> An authenticate method</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-two#sec:better_user_views"><span class="number">7.3</span> Better user views</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-two#sec:tests_with_factories"><span class="number">7.3.1</span> Testing the user show page (with factories)</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_name_and_a_gravatar"><span class="number">7.3.2</span> A name and a Gravatar</a></li><li><ol><li class="subsubsection"><a href="modeling-and-viewing-users-two#sec:a_gravatar_helper">A Gravatar helper</a></li></ol></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_user_sidebar"><span class="number">7.3.3</span> A user sidebar</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-two#sec:7.4"><span class="number">7.4</span> Conclusion</a></li><li><ol><li class="subsection"><a href="modeling-and-viewing-users-two#sec:7.4.1"><span class="number">7.4.1</span> Git commit</a></li><li class="subsection"><a href="modeling-and-viewing-users-two#sec:heroku_deploy"><span class="number">7.4.2</span> Heroku deploy</a></li></ol></li><li class="section"><a href="modeling-and-viewing-users-two#sec:more_modeling_users_exercises"><span class="number">7.5</span> Exercises</a></li></ol></li><li class="chapter"><a href="sign-up#top"><span class="number">Chapter 8</span> Sign up</a></li><li><ol><li class="section"><a href="sign-up#sec:signup_form"><span class="number">8.1</span> Signup form</a></li><li><ol><li class="subsection"><a href="sign-up#sec:using_form_for"><span class="number">8.1.1</span> Using <code>form_for</code></a></li><li class="subsection"><a href="sign-up#sec:the_form_html"><span class="number">8.1.2</span> The form HTML</a></li></ol></li><li class="section"><a href="sign-up#sec:signup_failure"><span class="number">8.2</span> Signup failure</a></li><li><ol><li class="subsection"><a href="sign-up#sec:testing_failure"><span class="number">8.2.1</span> Testing failure</a></li><li class="subsection"><a href="sign-up#sec:a_working_form"><span class="number">8.2.2</span> A working form</a></li><li class="subsection"><a href="sign-up#sec:signup_error_messages"><span class="number">8.2.3</span> Signup error messages</a></li><li class="subsection"><a href="sign-up#sec:filtering_parameter_logging"><span class="number">8.2.4</span> Filtering parameter logging</a></li></ol></li><li class="section"><a href="sign-up#sec:signup_success"><span class="number">8.3</span> Signup success</a></li><li><ol><li class="subsection"><a href="sign-up#sec:testing_success"><span class="number">8.3.1</span> Testing success</a></li><li class="subsection"><a href="sign-up#sec:the_finished_signup_form"><span class="number">8.3.2</span> The finished signup form</a></li><li class="subsection"><a href="sign-up#sec:the_flash"><span class="number">8.3.3</span> The flash</a></li><li class="subsection"><a href="sign-up#sec:the_first_signup"><span class="number">8.3.4</span> The first signup</a></li></ol></li><li class="section"><a href="sign-up#sec:rspec_integration_tests"><span class="number">8.4</span> RSpec integration tests</a></li><li><ol><li class="subsection"><a href="sign-up#sec:integration_tests_with_style"><span class="number">8.4.1</span> Integration tests with style</a></li><li class="subsection"><a href="sign-up#sec:failed_signup"><span class="number">8.4.2</span> Users signup failure should not make a new user</a></li><li class="subsection"><a href="sign-up#sec:successful_signup"><span class="number">8.4.3</span> Users signup success should make a new user</a></li></ol></li><li class="section"><a href="sign-up#sec:8.5"><span class="number">8.5</span> Conclusion</a></li><li class="section"><a href="sign-up#sec:signup_exercises"><span class="number">8.6</span> Exercises</a></li></ol></li><li class="chapter"><a href="sign-in-sign-out#top"><span class="number">Chapter 9</span> Sign in, sign out</a></li><li><ol><li class="section"><a href="sign-in-sign-out#sec:sessions"><span class="number">9.1</span> Sessions</a></li><li><ol><li class="subsection"><a href="sign-in-sign-out#sec:sessions_controller"><span class="number">9.1.1</span> Sessions controller</a></li><li class="subsection"><a href="sign-in-sign-out#sec:signin_form"><span class="number">9.1.2</span> Signin form</a></li></ol></li><li class="section"><a href="sign-in-sign-out#sec:signin_failure"><span class="number">9.2</span> Signin failure</a></li><li><ol><li class="subsection"><a href="sign-in-sign-out#sec:reviewing_form_submission"><span class="number">9.2.1</span> Reviewing form submission</a></li><li class="subsection"><a href="sign-in-sign-out#sec:failed_signin"><span class="number">9.2.2</span> Failed signin (test and code)</a></li></ol></li><li class="section"><a href="sign-in-sign-out#sec:signin_success"><span class="number">9.3</span> Signin success</a></li><li><ol><li class="subsection"><a href="sign-in-sign-out#sec:the_completed_create_action"><span class="number">9.3.1</span> The completed <code>create</code> action</a></li><li class="subsection"><a href="sign-in-sign-out#sec:remember_me"><span class="number">9.3.2</span> Remember me</a></li><li class="subsection"><a href="sign-in-sign-out#sec:current_user"><span class="number">9.3.3</span> Current user</a></li></ol></li><li class="section"><a href="sign-in-sign-out#sec:signing_out"><span class="number">9.4</span> Signing out</a></li><li><ol><li class="subsection"><a href="sign-in-sign-out#sec:destroying_sessions"><span class="number">9.4.1</span> Destroying sessions</a></li><li class="subsection"><a href="sign-in-sign-out#sec:signin_upon_signup"><span class="number">9.4.2</span> Signin upon signup</a></li><li class="subsection"><a href="sign-in-sign-out#sec:changing_the_layout_links"><span class="number">9.4.3</span> Changing the layout links</a></li><li class="subsection"><a href="sign-in-sign-out#sec:signin_out_integration_tests"><span class="number">9.4.4</span> Signin/out integration tests</a></li></ol></li><li class="section"><a href="sign-in-sign-out#sec:9.5"><span class="number">9.5</span> Conclusion</a></li><li class="section"><a href="sign-in-sign-out#sec:sign_in_out_exercises"><span class="number">9.6</span> Exercises</a></li></ol></li><li class="chapter"><a href="updating-showing-and-deleting-users#top"><span class="number">Chapter 10</span> Updating, showing, and deleting users</a></li><li><ol><li class="section"><a href="updating-showing-and-deleting-users#sec:updating_users"><span class="number">10.1</span> Updating users</a></li><li><ol><li class="subsection"><a href="updating-showing-and-deleting-users#sec:edit_form"><span class="number">10.1.1</span> Edit form</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:enabling_edits"><span class="number">10.1.2</span> Enabling edits</a></li></ol></li><li class="section"><a href="updating-showing-and-deleting-users#sec:protecting_pages"><span class="number">10.2</span> Protecting pages</a></li><li><ol><li class="subsection"><a href="updating-showing-and-deleting-users#sec:requiring_signed_in_users"><span class="number">10.2.1</span> Requiring signed-in users</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:requiring_the_right_user"><span class="number">10.2.2</span> Requiring the right user</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:friendly_forwarding"><span class="number">10.2.3</span> Friendly forwarding</a></li></ol></li><li class="section"><a href="updating-showing-and-deleting-users#sec:showing_users"><span class="number">10.3</span> Showing users</a></li><li><ol><li class="subsection"><a href="updating-showing-and-deleting-users#sec:user_index"><span class="number">10.3.1</span> User index</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:sample_users"><span class="number">10.3.2</span> Sample users</a></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:pagination"><span class="number">10.3.3</span> Pagination</a></li><li><ol><li class="subsubsection"><a href="updating-showing-and-deleting-users#sec:testing_pagination">Testing pagination</a></li></ol></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:partial_refactoring"><span class="number">10.3.4</span> Partial refactoring</a></li></ol></li><li class="section"><a href="updating-showing-and-deleting-users#sec:destroying_users"><span class="number">10.4</span> Destroying users</a></li><li><ol><li class="subsection"><a href="updating-showing-and-deleting-users#sec:administrative_users"><span class="number">10.4.1</span> Administrative users</a></li><li><ol><li class="subsubsection"><a href="updating-showing-and-deleting-users#sec:revisiting_attr_accessible">Revisiting <code>attr_accessible</code></a></li></ol></li><li class="subsection"><a href="updating-showing-and-deleting-users#sec:the_destroy_action"><span class="number">10.4.2</span> The <code>destroy</code> action</a></li></ol></li><li class="section"><a href="updating-showing-and-deleting-users#sec:10.5"><span class="number">10.5</span> Conclusion</a></li><li class="section"><a href="updating-showing-and-deleting-users#sec:updating_deleting_exercises"><span class="number">10.6</span> Exercises</a></li></ol></li><li class="chapter"><a href="user-microposts#top"><span class="number">Chapter 11</span> User microposts</a></li><li><ol><li class="section"><a href="user-microposts#sec:a_micropost_model"><span class="number">11.1</span> A Micropost model</a></li><li><ol><li class="subsection"><a href="user-microposts#sec:the_basic_model"><span class="number">11.1.1</span> The basic model</a></li><li><ol><li class="subsubsection"><a href="user-microposts#sec:accessible_attribute">Accessible attribute</a></li></ol></li><li class="subsection"><a href="user-microposts#sec:user_micropost_associations"><span class="number">11.1.2</span> User/Micropost associations</a></li><li class="subsection"><a href="user-microposts#sec:ordering_and_dependency"><span class="number">11.1.3</span> Micropost refinements</a></li><li><ol><li class="subsubsection"><a href="user-microposts#sec:default_scope">Default scope</a></li><li class="subsubsection"><a href="user-microposts#sec:dependent_destroy">Dependent: destroy</a></li></ol></li><li class="subsection"><a href="user-microposts#sec:micropost_validations"><span class="number">11.1.4</span> Micropost validations</a></li></ol></li><li class="section"><a href="user-microposts#sec:showing_microposts"><span class="number">11.2</span> Showing microposts</a></li><li><ol><li class="subsection"><a href="user-microposts#sec:augmenting_the_user_show_page"><span class="number">11.2.1</span> Augmenting the user show page</a></li><li class="subsection"><a href="user-microposts#sec:sample_microposts"><span class="number">11.2.2</span> Sample microposts</a></li></ol></li><li class="section"><a href="user-microposts#sec:manipulating_microposts"><span class="number">11.3</span> Manipulating microposts</a></li><li><ol><li class="subsection"><a href="user-microposts#sec:access_control"><span class="number">11.3.1</span> Access control</a></li><li class="subsection"><a href="user-microposts#sec:creating_microposts"><span class="number">11.3.2</span> Creating microposts</a></li><li class="subsection"><a href="user-microposts#sec:a_proto_feed"><span class="number">11.3.3</span> A proto-feed</a></li><li class="subsection"><a href="user-microposts#sec:destroying_microposts"><span class="number">11.3.4</span> Destroying microposts</a></li><li class="subsection"><a href="user-microposts#sec:testing_the_new_home_page"><span class="number">11.3.5</span> Testing the new home page</a></li></ol></li><li class="section"><a href="user-microposts#sec:11.4"><span class="number">11.4</span> Conclusion</a></li><li class="section"><a href="user-microposts#sec:micropost_exercises"><span class="number">11.5</span> Exercises</a></li></ol></li><li class="chapter"><a href="following-users#top"><span class="number">Chapter 12</span> Following users</a></li><li><ol><li class="section"><a href="following-users#sec:the_relationship_model"><span class="number">12.1</span> The Relationship model</a></li><li><ol><li class="subsection"><a href="following-users#sec:a_problem_with_the_data_model"><span class="number">12.1.1</span> A problem with the data model (and a solution)</a></li><li class="subsection"><a href="following-users#sec:relationship_user_associations"><span class="number">12.1.2</span> User/relationship associations</a></li><li class="subsection"><a href="following-users#sec:relationship_validations"><span class="number">12.1.3</span> Validations</a></li><li class="subsection"><a href="following-users#sec:following"><span class="number">12.1.4</span> Following</a></li><li class="subsection"><a href="following-users#sec:followers"><span class="number">12.1.5</span> Followers</a></li></ol></li><li class="section"><a href="following-users#sec:a_web_interface_for_following_and_followers"><span class="number">12.2</span> A web interface for following and followers</a></li><li><ol><li class="subsection"><a href="following-users#sec:sample_following_data"><span class="number">12.2.1</span> Sample following data</a></li><li class="subsection"><a href="following-users#sec:stats_and_a_follow_form"><span class="number">12.2.2</span> Stats and a follow form</a></li><li class="subsection"><a href="following-users#sec:following_and_followers_pages"><span class="number">12.2.3</span> Following and followers pages</a></li><li class="subsection"><a href="following-users#sec:a_working_follow_button_the_standard_way"><span class="number">12.2.4</span> A working follow button the standard way</a></li><li class="subsection"><a href="following-users#sec:a_working_follow_button_with_ajax"><span class="number">12.2.5</span> A working follow button with Ajax</a></li></ol></li><li class="section"><a href="following-users#sec:the_status_feed"><span class="number">12.3</span> The status feed</a></li><li><ol><li class="subsection"><a href="following-users#sec:motivation_and_strategy"><span class="number">12.3.1</span> Motivation and strategy</a></li><li class="subsection"><a href="following-users#sec:a_first_feed_implementation"><span class="number">12.3.2</span> A first feed implementation</a></li><li class="subsection"><a href="following-users#sec:scopes_subselects_and_a_lambda"><span class="number">12.3.3</span> Scopes, subselects, and a lambda</a></li><li class="subsection"><a href="following-users#sec:the_new_status_feed"><span class="number">12.3.4</span> The new status feed</a></li></ol></li><li class="section"><a href="following-users#sec:following_conclusion"><span class="number">12.4</span> Conclusion</a></li><li><ol><li class="subsection"><a href="following-users#sec:extensions_to_the_sample_application"><span class="number">12.4.1</span> Extensions to the sample application</a></li><li><ol><li class="subsubsection"><a href="following-users#sec:replies">Replies</a></li><li class="subsubsection"><a href="following-users#sec:messaging">Messaging</a></li><li class="subsubsection"><a href="following-users#sec:follower_notifications">Follower notifications</a></li><li class="subsubsection"><a href="following-users#sec:password_reminders">Password reminders</a></li><li class="subsubsection"><a href="following-users#sec:signup_confirmation">Signup confirmation</a></li><li class="subsubsection"><a href="following-users#sec:rss_feed">RSS feed</a></li><li class="subsubsection"><a href="following-users#sec:rest_api">REST API</a></li><li class="subsubsection"><a href="following-users#sec:search">Search</a></li></ol></li><li class="subsection"><a href="following-users#sec:guide_to_further_resources"><span class="number">12.4.2</span> Guide to further resources</a></li></ol></li><li class="section"><a href="following-users#sec:following_exercises"><span class="number">12.5</span> Exercises</a></li></ol></li><li class="chapter"><a href="rails-3-1#top"><span class="number">Chapter 13</span> Rails 3.1</a></li><li><ol><li class="section"><a href="rails-3-1#sec:upgrading_the_sample_app"><span class="number">13.1</span> Upgrading the sample app</a></li><li><ol><li class="subsection"><a href="rails-3-1#sec:installing_and_configuring_rails_3_1"><span class="number">13.1.1</span> Installing and configuring Rails&nbsp;3.1</a></li><li class="subsection"><a href="rails-3-1#sec:getting_to_red"><span class="number">13.1.2</span> Getting to Red</a></li><li class="subsection"><a href="rails-3-1#sec:minor_issues"><span class="number">13.1.3</span> Minor issues</a></li><li><ol><li class="subsubsection"><a href="rails-3-1#sec:will_paginate">will_paginate</a></li><li class="subsubsection"><a href="rails-3-1#sec:pagination_spec">Pagination spec</a></li></ol></li><li class="subsection"><a href="rails-3-1#sec:major_differences"><span class="number">13.1.4</span> Major differences</a></li><li><ol><li class="subsubsection"><a href="rails-3-1#sec:asset_directories">Asset directories</a></li><li class="subsubsection"><a href="rails-3-1#sec:prototype_to_jquery">Prototype to jQuery</a></li></ol></li></ol></li><li class="section"><a href="rails-3-1#sec:new_features"><span class="number">13.2</span> New features in Rails 3.1</a></li><li><ol><li class="subsection"><a href="rails-3-1#sec:asset_pipeline"><span class="number">13.2.1</span> Asset pipeline</a></li><li class="subsection"><a href="rails-3-1#sec:reversible_migrations"><span class="number">13.2.2</span> Reversible migrations</a></li><li class="subsection"><a href="rails-3-1#sec:sass_and_coffeescript"><span class="number">13.2.3</span> Sass and CoffeeScript</a></li></ol></li><li class="section"><a href="rails-3-1#sec:rails_3_1_exercises"><span class="number">13.3</span> Exercises</a></li></ol></li></ol></div>


<div id="main_content"></div>


<p> <span class="preamble">
 <span id="foreword">
<strong> Foreword</strong> <br />
 </span>
 </span></p>

<p>My former company (CD Baby) was one of the first to loudly switch to Ruby on Rails, and then even more loudly switch back to PHP (Google me to read about the drama). This book by Michael Hartl came so highly recommended that I had to try it, and <em>Ruby on Rails Tutorial</em> is what I used to switch back to Rails again.</p>

<p>Though I&rsquo;ve worked my way through many Rails books, this is the one that finally made me &ldquo;get&rdquo; it. Everything is done very much &ldquo;the Rails way&rdquo;&mdash;a way that felt very unnatural to me before, but now after doing this book finally feels natural. This is also the only Rails book that does test-driven development the entire time, an approach highly recommended by the experts but which has never been so clearly demonstrated before. Finally, by including Git, GitHub, and Heroku in the demo examples, the author really gives you a feel for what it&rsquo;s like to do a real-world project. The tutorial&rsquo;s code examples are not in isolation.</p>

<p>The linear narrative is such a great format. Personally, I powered through <em>Rails Tutorial</em> in three long days, doing all the examples and challenges at the end of each chapter. Do it from start to finish, without jumping around, and you&rsquo;ll get the ultimate benefit.</p>

<p>Enjoy!</p>

<p><a href="http://sivers.org/">Derek Sivers</a> (<a href="http://sivers.org/">sivers.org</a>) <br />
<em>Formerly: Founder,</em> <a href="http://www.cdbaby.com/"><em>CD Baby</em></a> <br />
<em>Currently: Founder,</em> <a href="http://thoughts.pro/"><em>Thoughts Ltd.</em></a> <br /></p>

<p> <span class="preamble">
<strong> Acknowledgments</strong> <br />
 </span></p>

<p><em>Ruby on Rails Tutorial</em> owes a lot to my previous Rails book, <em>RailsSpace</em>, and hence to my coauthor <a href="http://aure.com/">Aurelius Prochazka</a>. I&rsquo;d like to thank Aure both for the work he did on that book and for his support of this one. I&rsquo;d also like to thank Debra Williams Cauley, my editor on both <em>RailsSpace</em> and <em>Rails Tutorial</em>; as long as she keeps taking me to baseball games, I&rsquo;ll keep writing books for her.</p>

<p>I&rsquo;d like to acknowledge a long list of Rubyists who have taught and inspired me over the years: David Heinemeier Hansson, Yehuda Katz, Carl Lerche, Jeremy Kemper, Xavier Noria, Ryan Bates, Geoffrey Grosenbach, Peter Cooper, Matt Aimonetti, Gregg Pollack, Wayne&nbsp;E. Seguin, Amy Hoy, Dave Chelimsky, Pat Maddox, Tom Preston-Werner, Chris Wanstrath, Chad Fowler, Josh Susser, Obie Fernandez, Ian McFarland, Steven Bristol, Wolfram Arnold, Alex Chaffee, Giles Bowkett, Evan Dorn, Long Nguyen, James Lindenbaum, Adam Wiggins, Tikhon Bernstam, Ron Evans, Wyatt Greene, Miles Forrest, the good people at Pivotal Labs, the Heroku gang, the thoughtbot guys, and the GitHub crew. Finally, many, many readers&mdash;far too many to list&mdash;have contributed a huge number of bug reports and suggestions during the writing of this book, and I gratefully acknowledge their help in making it as good as it can&nbsp;be. <br /></p>

<p> <span class="preamble">
 <span id="author">
<strong> About the author</strong> <br />
 </span>
 </span></p>

<p><a href="http://michaelhartl.com/">Michael Hartl</a> is a programmer, educator, and entrepreneur. Michael was coauthor of <em>RailsSpace</em>, a best-selling Rails tutorial book published in 2007, and was cofounder and lead developer of <a href="http://insoshi.com/">Insoshi</a>, a <a href="http://github.com/popular/forked">popular</a> social networking platform in Ruby on Rails. Previously, he taught theoretical and computational physics at the <a href="http://www.caltech.edu/">California Institute of Technology</a> (Caltech), where he received the Lifetime Achievement Award for Excellence in Teaching. Michael is a graduate of <a href="http://college.harvard.edu/">Harvard College</a>, has a <a href="http://resolver.caltech.edu/CaltechETD:etd-05222003-161626">Ph.D. in Physics</a> from <a href="http://www.caltech.edu/">Caltech</a>, and is an alumnus of the <a href="http://ycombinator.com/">Y&nbsp;Combinator</a> entrepreneur program. <br /></p>

<p> <span id="license" class="preamble">
<strong> Copyright and license</strong> <br />
 </span></p>

<p><em>Ruby on Rails Tutorial: Learn Rails by Example</em>. Copyright &copy; 2010 by Michael Hartl. All source code in <em>Ruby on Rails Tutorial</em> is available under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a> and the <a href="http://en.wikipedia.org/wiki/Beerware">Beerware License</a>.</p>

<pre class="verbatim">   Copyright (c) 2010 Michael Hartl

   Permission is hereby granted, free of charge, to any person
   obtaining a copy of this software and associated documentation
   files (the &quot;Software&quot;), to deal in the Software without
   restriction, including without limitation the rights to use,
   copy, modify, merge, publish, distribute, sublicense, and/or sell
   copies of the Software, and to permit persons to whom the
   Software is furnished to do so, subject to the following
   conditions:

   The above copyright notice and this permission notice shall be
   included in all copies or substantial portions of the Software.

   THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,
   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
   OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
   HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
   WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
   OTHER DEALINGS IN THE SOFTWARE.</pre>




<pre class="verbatim">/*
 * ------------------------------------------------------------
 * &quot;THE BEERWARE LICENSE&quot; (Revision 42):
 * Michael Hartl wrote this code. As long as you retain this 
 * notice, you can do whatever you want with this stuff. If we
 * meet someday, and you think this stuff is worth it, you can
 * buy me a beer in return.
 * ------------------------------------------------------------
 */</pre>




<div id="top"></div>


<h1 class="chapter"><a id="sec:5" href="filling-in-the-layout#top" class="heading"><span class="number">Chapter 5</span> Filling in the layout</a></h1>


<p>In the process of taking a brief tour of Ruby in <a class="ref" href="rails-flavored-ruby#top">Chapter&nbsp;4</a>, we added some basic cascading style sheets to our site layout (<a class="ref" href="rails-flavored-ruby#sec:cascading_style_sheets">Section&nbsp;4.1.2</a>). In this chapter, we&rsquo;ll add some custom styles of our own, as we fill in the layout with links to the pages (such as Home and About) that we&rsquo;ve created so far. Along the way, we&rsquo;ll learn about partials, Rails routes, and integration tests. We&rsquo;ll end by taking a first important step toward letting users sign up to our site.</p>

<div class="label" id="sec:structure"></div>


<h2><a id="sec:5.1" href="filling-in-the-layout#sec:structure" class="heading"><span class="number">5.1</span> Adding some structure</a></h2>


<p><em>Rails Tutorial</em> is a book on web development, not web design, but it would be depressing to work on an application that looks like <em>complete</em> crap, so in this section we&rsquo;ll add some structure to the layout and give it some minimal styling with CSS. We&rsquo;ll also give our <em>code</em> some styling, so to speak, using <em>partials</em> to tidy up the layout once it gets a little cluttered.</p>

<p>When building web applications, it is often useful to get a high-level overview of the user interface as early as possible. Throughout the rest of this book, I will thus often include <em>mockups</em> (in a web context often called <em>wireframes</em>), which are rough sketches of what the eventual application will look like.<sup class="footnote" id="fnref:5.1"><a href="#fn:5.1">1</a></sup> In this chapter, we will principally be developing the static pages introduced in <a class="ref" href="static-pages#sec:static_pages">Section&nbsp;3.1</a>, including a site logo, a navigation header, and a site footer. A mockup for the most important of these pages, the Home page, appears in <a class="ref" href="filling-in-the-layout#fig:home_page_mockup">Figure&nbsp;5.1</a>. (You can see the final result in <a class="ref" href="filling-in-the-layout#fig:site_with_footer">Figure&nbsp;5.8</a>. You&rsquo;ll note that it differs in some details&mdash;for example, the footer has four links instead of three&mdash;but that&rsquo;s fine, since a mockup need not be exact.)</p>

<div class="label" id="fig:home_page_mockup"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/home_page_mockup.png" alt="home_page_mockup" /></span></div><div class="caption"><span class="header">Figure 5.1: </span><span class="description">A mockup of the sample application&rsquo;s Home page.&nbsp;<a href="http://railstutorial.org/images/figures/home_page_mockup-full.png">(full size)</a></span></div></div>


<p>As usual, if you&rsquo;re using Git for version control, now would be a good time to make a new branch:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout -b filling-in-layout
</pre></div>
</div>


<p>You might still have the <code>example_user.rb</code> file from <a class="ref" href="rails-flavored-ruby#top">Chapter&nbsp;4</a> in your project directory; if so, you should probably just remove it.</p>

<div class="label" id="sec:adding_to_the_layout"></div>


<h3><a id="sec:5.1.1" href="filling-in-the-layout#sec:adding_to_the_layout" class="heading"><span class="number">5.1.1</span> Site navigation</a></h3>


<p>When we last saw the site layout file <code>application.html.erb</code> in <a class="ref" href="rails-flavored-ruby#code:application_layout_full_title">Listing&nbsp;4.3</a>, we had just added Blueprint stylesheets using the Rails <code>stylesheet_link_tag</code> helper. It&rsquo;s time to add a couple more stylesheets, one specifically for Internet Explorer browsers and one for our (soon-to-be-added) custom CSS. We&rsquo;ll also add some additional divisions (<code>div</code>s), some <code>id</code>s and <code>class</code>es, and the start of our site navigation. The full file is in <a class="ref" href="filling-in-the-layout#code:layout_new_structure">Listing&nbsp;5.1</a>; explanations for the various pieces follow immediately thereafter. If you&rsquo;d rather not delay gratification, you can see the results in <a class="ref" href="filling-in-the-layout#fig:layout_no_logo_or_custom_css">Figure&nbsp;5.2</a>. (<em>Note:</em> it&rsquo;s not (yet) very gratifying.)</p>

<div class="label" id="code:layout_new_structure"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.1.</span> <span class="description">The site layout with added structure. <br /> <code>app/views/layouts/application.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tag</span> <span class="cp">%&gt;</span>
    <span class="c">&lt;!--[if lt IE 9]&gt;</span>
<span class="c">    &lt;script src=&quot;http://html5shiv.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;</span>
<span class="c">    &lt;![endif]--&gt;</span>    
    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/screen&#39;</span><span class="p">,</span> <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;screen&#39;</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/print&#39;</span><span class="p">,</span>  <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;print&#39;</span> <span class="cp">%&gt;</span>
    <span class="c">&lt;!--[if lt IE 8]&gt;</span><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/ie&#39;</span> <span class="cp">%&gt;</span><span class="c">&lt;![endif]--&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;custom&#39;</span><span class="p">,</span> <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;screen&#39;</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;header&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;logo.png&quot;</span><span class="p">,</span> <span class="ss">:alt</span> <span class="o">=&gt;</span> <span class="s2">&quot;Sample App&quot;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;round&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span>
        <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;ul&gt;</span>
            <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Help&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign in&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;/ul&gt;</span>
        <span class="nt">&lt;/nav&gt;</span>
      <span class="nt">&lt;/header&gt;</span>
      <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
        <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/section&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div></div>


<p>Let&rsquo;s look at the new elements from top to bottom. As noted briefly in <a class="ref" href="static-pages#sec:static_pages">Section&nbsp;3.1</a>, Rails&nbsp;3 uses HTML5 by default (as indicated by the doctype <code>&lt;!DOCTYPE html&gt;</code>); since the HTML5 standard is new, some browsers (especially Internet Explorer) don&rsquo;t yet fully support it, so we include some JavaScript code (known as an &ldquo;<a href="http://code.google.com/p/html5shiv/">HTML5 shiv</a>&rdquo;) to work around the issue:</p>

<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 9]&gt;</span>
<span class="c">&lt;script src=&quot;http://html5shiv.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;</span>
<span class="c">&lt;![endif]--&gt;</span>
</pre></div>
</div>


<p>The somewhat odd syntax</p>

<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 9]&gt;</span>
</pre></div>
</div>


<p>includes the enclosed line only if the version of Microsoft Internet Explorer&nbsp;(IE) is less than&nbsp;9 (<code>if lt IE 9</code>). The weird <code>[if lt IE 9]</code> syntax is <em>not</em> part of Rails; it&rsquo;s actually a <a href="http://en.wikipedia.org/wiki/Conditional_comment">conditional comment</a> supported by Internet Explorer browsers for just this sort of situation. It&rsquo;s a good thing, too, because it means we can include the extra stylesheet <em>only</em> for IE browsers less than version&nbsp;9, leaving other browsers such as Firefox, Chrome, and Safari unaffected.</p>

<p>After the lines to include the Blueprint stylesheets (first introduced in <a class="ref" href="rails-flavored-ruby#code:layout_with_stylesheets">Listing&nbsp;4.4</a>), there is another Internet Explorer&ndash;specific line, which this time is a stylesheet that only gets included if the browser is a version of Internet Explorer less than&nbsp;8 (<code>if lt IE 8</code>):</p>

<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 8]&gt;</span><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/ie&#39;</span> <span class="cp">%&gt;</span><span class="c">&lt;![endif]--&gt;</span>
</pre></div>
</div>


<p>IE has a large number of idiosyncrasies (especially before version&nbsp;8), and Blueprint comes with a special <code>ie.css</code> file that fixes a bunch of them.</p>

<p>After the IE stylesheet comes a stylesheet link for a file that doesn&rsquo;t exist yet, <code>custom.css</code>, where we&rsquo;ll put our custom CSS:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;custom&#39;</span><span class="p">,</span> <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;screen&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>CSS is very forgiving, and even though the file doesn&rsquo;t exist our page will still work just fine. (We&rsquo;ll create <code>custom.css</code> in <a class="ref" href="filling-in-the-layout#sec:custom_css">Section&nbsp;5.1.2</a>.)</p>

<p>The next section places a <em>container div</em> around our site navigation and content, which is a <code>div</code> tag with class <code>container</code>. This container div is needed by Blueprint (see the <a href="http://wiki.github.com/joshuaclayton/blueprint-css/quick-start-tutorial">Blueprint tutorial</a> for more information). Then there are <code>header</code> and <code>section</code> elements; the header contains the sample app logo (to be added below) and the site navigation (<code>nav</code>). Finally, there is <code>section</code> element containing the site&rsquo;s main content:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;header&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;logo.png&quot;</span><span class="p">,</span> <span class="ss">:alt</span> <span class="o">=&gt;</span> <span class="s2">&quot;Sample App&quot;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;round&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Help&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign in&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/nav&gt;</span>
  <span class="nt">&lt;/header&gt;</span>
  <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
    <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/section&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>


<p>The <code>div</code> tag in HTML is a generic division; it doesn&rsquo;t do anything apart from divide the document into distinct parts. In older style HTML, <code>div</code> tags are used for nearly all site divisions, but HTML5 adds the <code>header</code>, <code>nav</code>, and <code>section</code> elements for divisions common to many applications. All HTML elements, including divs and the new HTML5 elements, can be assigned <em>classes</em><sup class="footnote" id="fnref:5.2"><a href="#fn:5.2">2</a></sup> and <em>ids</em>; these are merely labels, and are useful for styling with CSS (<a class="ref" href="filling-in-the-layout#sec:custom_css">Section&nbsp;5.1.2</a>). The main difference between classes and ids is that classes can be used multiple times on a page, but ids can only be used once.</p>

<p>Inside the header is a Rails helper called <code>image_tag</code>:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;logo.png&quot;</span><span class="p">,</span> <span class="ss">:alt</span> <span class="o">=&gt;</span> <span class="s2">&quot;Sample App&quot;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;round&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>Note that, as with <code>stylesheet_link_tag</code> (<a class="ref" href="rails-flavored-ruby#sec:css_revisited">Section&nbsp;4.3.4</a>), we pass a hash of options, in this case setting the <code>alt</code> and <code>class</code> attributes of the image tag using symbols <code>:alt</code> and <code>:class</code>. To make this clearer, let&rsquo;s look at the HTML this tag produces:<sup class="footnote" id="fnref:5.3"><a href="#fn:5.3">3</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">&quot;Sample App&quot;</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span> <span class="na">src=</span><span class="s">&quot;/images/logo.png&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>


<p>The <code>alt</code> attribute is what will be displayed if there is no image,<sup class="footnote" id="fnref:5.4"><a href="#fn:5.4">4</a></sup> and the class will be used for styling in <a class="ref" href="filling-in-the-layout#sec:custom_css">Section&nbsp;5.1.2</a>. (Rails helpers often take options hashes in this way, giving us the flexibility to add arbitrary HTML options without ever leaving Rails.) You can see the result in <a class="ref" href="filling-in-the-layout#fig:layout_no_logo_or_custom_css">Figure&nbsp;5.2</a>; we&rsquo;ll add the logo image at the end of this section.</p>

<p>The second element inside the layout header is a list of navigation links, made using the <em>unordered list</em> tag <code>ul</code>, together with the <em>list item</em> tag <code>li</code>:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Help&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign in&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre></div>
</div>


<p>This list uses the Rails helper <code>link_to</code> to create links (which we created directly with the anchor tag&nbsp;<code>a</code> in <a class="ref" href="static-pages#sec:passing_title_tests">Section&nbsp;3.3.2</a>); the first argument is the link text, while the second is the URL. We&rsquo;ll fill in the URLs with <em>named routes</em> in <a class="ref" href="filling-in-the-layout#sec:named_routes">Section&nbsp;5.2.3</a>, but for now we use the stub URL <code>&rsquo;#&rsquo;</code> commonly used in web design. Once Rails has processed this layout and evaluated the Embedded Ruby, the list looks like this:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Help<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Sign in<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre></div>
</div>


<p>Our layout is now complete, and we can look at the results by visiting, e.g., the Home page. In anticipation of adding users to our site in <a class="ref" href="sign-up#top">Chapter&nbsp;8</a>, let&rsquo;s add a signup link to the <code>home.html.erb</code> view (<a class="ref" href="filling-in-the-layout#code:signup_button">Listing&nbsp;5.2</a>).</p>

<div class="label" id="code:signup_button"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.2.</span> <span class="description">The Home page with a link to the signup page. <br /> <code>app/views/pages/home.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Sample App<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span>
  This is the home page for the
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/&quot;</span><span class="nt">&gt;</span>Ruby on Rails Tutorial<span class="nt">&lt;/a&gt;</span>
  sample application.
<span class="nt">&lt;/p&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign up now!&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;signup_button round&quot;</span> <span class="cp">%&gt;</span>
</pre></div>
</div></div>


<p>As with the previous uses of <code>link_to</code>, this just creates a stub link of the form</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">class=</span><span class="s">&quot;signup_button round&quot;</span><span class="nt">&gt;</span>Sign up now!<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>


<p>Note again the recurring theme of options hashes, in this case used to add a couple CSS classes to the anchor tag. You might notice that the <code>a</code> tag here has <em>two</em> classes, separated by a space:</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">class=</span><span class="s">&quot;signup_button round&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>


<p>This is convenient for the common case of an element with two different kinds of styles.</p>

<p>Now we&rsquo;re finally ready to see the fruits of our labors (<a class="ref" href="filling-in-the-layout#fig:layout_no_logo_or_custom_css">Figure&nbsp;5.2</a>).<sup class="footnote" id="fnref:5.5"><a href="#fn:5.5">5</a></sup> Pretty underwhelming, you say? Perhaps so. Happily, though, we&rsquo;ve done a good job of giving our HTML elements sensible classes and ids, which puts us in a great position to add style to the site with CSS.</p>

<div class="label" id="fig:layout_no_logo_or_custom_css"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/layout_no_logo_or_custom_css.png" alt="layout_no_logo_or_custom_css" /></span></div><div class="caption"><span class="header">Figure 5.2: </span><span class="description">The Home page (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) with no logo image or custom CSS.&nbsp;<a href="http://railstutorial.org/images/figures/layout_no_logo_or_custom_css-full.png">(full size)</a></span></div></div>


<p>Before we move on to CSS styling, let&rsquo;s replace the logo alt text with a logo image; you can download the sample application logo at <br /> <br />
<a href="http://railstutorial.org/images/sample_app/logo.png">http://railstutorial.org/images/sample_app/logo.png</a><br /></p>

<p>Put the logo in <code>public/images</code> so that Rails can find it. The result appears in <a class="ref" href="filling-in-the-layout#fig:layout_logo_no_css">Figure&nbsp;5.3</a>.</p>

<div class="label" id="fig:layout_logo_no_css"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/layout_logo_no_css.png" alt="layout_logo_no_css" /></span></div><div class="caption"><span class="header">Figure 5.3: </span><span class="description">The Home page (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) with a logo image but no custom CSS.&nbsp;<a href="http://railstutorial.org/images/figures/layout_logo_no_css-full.png">(full size)</a></span></div></div>




<div class="label" id="sec:custom_css"></div>


<h3><a id="sec:5.1.2" href="filling-in-the-layout#sec:custom_css" class="heading"><span class="number">5.1.2</span> Custom CSS</a></h3>


<p>In <a class="ref" href="filling-in-the-layout#sec:adding_to_the_layout">Section&nbsp;5.1.1</a>, you may have noticed that the CSS elements are <em>semantic</em>, that is, they have meaning in English beyond the structure of the page. For example, instead of writing that the navigation menu was &ldquo;right-top&rdquo; we used the element &ldquo;nav&rdquo;. This gives us considerable flexibility in constructing a layout based on CSS.</p>

<p>Let&rsquo;s get started by filling in the <code>custom.css</code> file with <a class="ref" href="filling-in-the-layout#code:header_content">Listing&nbsp;5.3</a>. (There are quite a few rules in <a class="ref" href="filling-in-the-layout#code:header_content">Listing&nbsp;5.3</a>. To get a sense of what a CSS rule does, it&rsquo;s often helpful to comment it out using CSS comments, i.e., by putting it inside <code>/* &hellip; */</code>, and seeing what changes.)</p>

<div class="label" id="code:header_content"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.3.</span> <span class="description">CSS for the container, body, and links. <br /> <code>public/stylesheets/custom.css</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nc">.container</span> <span class="p">{</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">710px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">body</span> <span class="p">{</span>
  <span class="k">background</span><span class="o">:</span> <span class="m">#cff</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">header</span> <span class="p">{</span>
  <span class="k">padding-top</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">header</span> <span class="nt">img</span> <span class="p">{</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">1em</span><span class="p">;</span>
  <span class="k">background</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">section</span> <span class="p">{</span>
  <span class="k">margin-top</span><span class="o">:</span> <span class="m">1em</span><span class="p">;</span>
  <span class="k">font-size</span><span class="o">:</span> <span class="m">120%</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
  <span class="k">background</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">section</span> <span class="nt">h1</span> <span class="p">{</span>
  <span class="k">font-size</span><span class="o">:</span> <span class="m">200%</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* Links */</span>

<span class="nt">a</span> <span class="p">{</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#09c</span><span class="p">;</span>
  <span class="k">text-decoration</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">a</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#069</span><span class="p">;</span>
  <span class="k">text-decoration</span><span class="o">:</span> <span class="k">underline</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">a</span><span class="nd">:visited</span> <span class="p">{</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#069</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>


<p>You can see the results of this CSS in <a class="ref" href="filling-in-the-layout#fig:layout_with_colors">Figure&nbsp;5.4</a>. There&rsquo;s a lot of CSS here, but it has a consistent form. Each rule refers either to a class, an id, an HTML tag, or some combination thereof, followed by a list of styling commands. For example,</p>

<div class="code"><div class="highlight"><pre><span class="nt">body</span> <span class="p">{</span>
  <span class="k">background</span><span class="o">:</span> <span class="m">#cff</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>changes the background color of the <code>body</code> tag to baby blue, while</p>

<div class="code"><div class="highlight"><pre><span class="nt">header</span> <span class="nt">img</span> <span class="p">{</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">1em</span><span class="p">;</span>
  <span class="k">background</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>puts a padding layer of one <code>em</code> (roughly the width of the letter <tt>M</tt>) around the image (<code>img</code>) inside a <code>header</code> tag. This rule also makes the background color <code>#fff</code>, which is white.<sup class="footnote" id="fnref:5.6"><a href="#fn:5.6">6</a></sup> Similarly,</p>

<div class="code"><div class="highlight"><pre><span class="nc">.container</span> <span class="p">{</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">710px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>styles an element with class <code>container</code>, in this case giving it a width of 710 pixels (corresponding to 18 Blueprint columns).<sup class="footnote" id="fnref:5.7"><a href="#fn:5.7">7</a></sup> The dot <code>.</code> in <code>.container</code> indicates that the rule styles a <em>class</em> called &ldquo;container&rdquo;. (As we&rsquo;ll see in <a class="ref" href="sign-up#sec:signup_error_messages">Section&nbsp;8.2.3</a>, the pound sign <code>#</code> identifies a rule to style a CSS <em>id</em> in the same way that a dot indicates a CSS class.)</p>

<div class="label" id="fig:layout_with_colors"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/layout_with_colors.png" alt="layout_with_colors" /></span></div><div class="caption"><span class="header">Figure 5.4: </span><span class="description">The Home page (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) with custom colors.&nbsp;<a href="http://railstutorial.org/images/figures/layout_with_colors-full.png">(full size)</a></span></div></div>


<p>Changing colors is nice, but the navigation links are still hanging down on the left side of the page. Let&rsquo;s move them to a better location and give them a nicer appearance with the navigation rules in <a class="ref" href="filling-in-the-layout#code:navigation_css">Listing&nbsp;5.4</a>. The results appear in <a class="ref" href="filling-in-the-layout#fig:layout_no_rounded_corners">Figure&nbsp;5.5</a>. (In some of the book&rsquo;s code samples, including <a class="ref" href="filling-in-the-layout#code:navigation_css">Listing&nbsp;5.4</a>, I use three vertical dots to indicate omitted code. When typing in the code, take care not to include the dots; alternatively, if you copy-and-paste the code, make sure to remove the dots by hand.)</p>

<div class="label" id="code:navigation_css"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.4.</span> <span class="description">Navigation CSS. <br /> <code>public/stylesheets/custom.css</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="c">/* Navigation */</span>

<span class="nt">nav</span> <span class="p">{</span>
  <span class="k">float</span><span class="o">:</span> <span class="k">right</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="nb">white</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span> <span class="m">0.7em</span><span class="p">;</span>
  <span class="k">white-space</span><span class="o">:</span> <span class="k">nowrap</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="nt">ul</span> <span class="p">{</span>
  <span class="k">margin</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="p">{</span>
  <span class="k">list-style-type</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">0.2em</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="nt">a</span> <span class="p">{</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span> <span class="m">5px</span><span class="p">;</span>
  <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="nt">a</span><span class="nd">:visited</span> <span class="p">{</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#09c</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="nt">a</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="k">text-decoration</span><span class="o">:</span> <span class="k">underline</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>


<p>Here <code>nav ul</code> styles a <code>ul</code> tag inside a <code>nav</code> tag, <code>nav ul li</code> styles an <code>li</code> tag inside a <code>ul</code> tag inside a <code>nav</code> tag, and so on.</p>

<div class="label" id="fig:layout_no_rounded_corners"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/layout_no_rounded_corners.png" alt="layout_no_rounded_corners" /></span></div><div class="caption"><span class="header">Figure 5.5: </span><span class="description">The Home page (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) with navigation styling.&nbsp;<a href="http://railstutorial.org/images/figures/layout_no_rounded_corners-full.png">(full size)</a></span></div></div>


<p>As the <a href="http://www.answers.com/penultimate">penultimate</a> step, we&rsquo;ll make the link to our site&rsquo;s signup page a little more obvious. (Though for the sample app we don&rsquo;t care, on any real site it&rsquo;s naturally quite important to make the signup link <em>very</em> prominent.) <a class="ref" href="filling-in-the-layout#code:signup_css">Listing&nbsp;5.5</a> shows CSS to make the signup link big, green, and clickable (so a click anywhere inside the box will follow the link).</p>

<div class="label" id="code:signup_css"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.5.</span> <span class="description">CSS to make the signup button big, green, and clickable. <br /> <code>public/stylesheets/custom.css</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>

<span class="c">/* Sign up button */</span>

<span class="nt">a</span><span class="nc">.signup_button</span> <span class="p">{</span>
  <span class="k">margin-left</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
  <span class="k">margin-right</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">190px</span><span class="p">;</span>
  <span class="k">color</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
  <span class="k">background</span><span class="o">:</span> <span class="m">#006400</span><span class="p">;</span>
  <span class="k">font-size</span><span class="o">:</span> <span class="m">150%</span><span class="p">;</span>
  <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>


<p>There are a bunch of rules here; as usual, comment a line out and reload the page if you want to see what each one does. The end result is a signup link that&rsquo;s hard to miss (<a class="ref" href="filling-in-the-layout#fig:signup_button">Figure&nbsp;5.6</a>).</p>

<div class="label" id="fig:signup_button"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/signup_button.png" alt="signup_button" /></span></div><div class="caption"><span class="header">Figure 5.6: </span><span class="description">The Home page (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) with a signup button.&nbsp;<a href="http://railstutorial.org/images/figures/signup_button-full.png">(full size)</a></span></div></div>


<p>As a final touch, we&rsquo;ll make use of the <code>round</code> class we&rsquo;ve placed on many of our site elements. Although the current sharp-cornered boxes aren&rsquo;t terrible, it&rsquo;s a little friendlier to soften the corners so they won&rsquo;t slice up our users. We can accomplish this using the CSS code in <a class="ref" href="filling-in-the-layout#code:round_css">Listing&nbsp;5.6</a>, with the results shown in <a class="ref" href="filling-in-the-layout#fig:layout_rounded_corners">Figure&nbsp;5.7</a>.</p>

<div class="label" id="code:round_css"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.6.</span> <span class="description">Stylesheet rules for round corners. <br /> <code>public/stylesheets/custom.css</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="c">/* Round corners */</span>

<span class="nc">.round</span> <span class="p">{</span>
  <span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span>    <span class="m">10px</span><span class="p">;</span>
  <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
  <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span>         <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>


<p>It&rsquo;s worth noting that this trick works on Firefox, Safari, Opera, and many other browsers, but it doesn&rsquo;t work on Internet Explorer. There <em>are</em> ways of getting round corners that work on all browsers, but there&rsquo;s no other technique that&rsquo;s even <em>close</em> to this easy, so we&rsquo;ll just risk leaving our IE users with a few tiny cuts.</p>

<div class="label" id="fig:layout_rounded_corners"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/layout_rounded_corners.png" alt="layout_rounded_corners" /></span></div><div class="caption"><span class="header">Figure 5.7: </span><span class="description">The Home page (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) with round corners.&nbsp;<a href="http://railstutorial.org/images/figures/layout_rounded_corners-full.png">(full size)</a></span></div></div>




<div class="label" id="sec:partials"></div>


<h3><a id="sec:5.1.3" href="filling-in-the-layout#sec:partials" class="heading"><span class="number">5.1.3</span> Partials</a></h3>


<p>Though the layout in <a class="ref" href="filling-in-the-layout#code:layout_new_structure">Listing&nbsp;5.1</a> serves its purpose, it&rsquo;s getting a little cluttered: there are several lines of CSS includes and even more lines of header for what are logically only two ideas. We can tuck these sections away using a convenient Rails facility called <em>partials</em>. Let&rsquo;s first take a look at what the layout looks like after the partials are defined (<a class="ref" href="filling-in-the-layout#code:layout_with_partials">Listing&nbsp;5.7</a>).</p>

<div class="label" id="code:layout_with_partials"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.7.</span> <span class="description">The site layout with partials for the stylesheets and header. <br /> <code>app/views/layouts/application.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tag</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/stylesheets&#39;</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/header&#39;</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
        <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/section&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div></div>


<p>In <a class="ref" href="filling-in-the-layout#code:layout_with_partials">Listing&nbsp;5.7</a>, we&rsquo;ve replaced the stylesheet lines with a single call to a Rails helper called <code>render</code>:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/stylesheets&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>The effect of this line is to look for a file called  <code>app/views/layouts/_stylesheets.html.erb</code>, evaluate its contents, and insert the results into the view.<sup class="footnote" id="fnref:5.8"><a href="#fn:5.8">8</a></sup> (Recall that <tt class="verb">&lt;%= ... %&gt;</tt> is the Embedded Ruby syntax needed to evaluate a Ruby expression and then insert the results into the template.) Note the leading underscore on the filename <code>_stylesheets.html.erb</code>; this underscore is the universal convention for naming partials, and among other things makes it possible to identify all the partials in a directory at a glance.</p>

<p>Of course, to get the partial to work, we have to fill it with some content; in the case of the stylesheet partial, this is just the four lines of stylesheet includes from <a class="ref" href="filling-in-the-layout#code:layout_new_structure">Listing&nbsp;5.1</a>; the result appears in <a class="ref" href="filling-in-the-layout#code:stylesheets_partial">Listing&nbsp;5.8</a>. (Technically, the HTML5 shiv includes JavaScript, not CSS. On the other hand, its purpose is to allow Internet Explorer to understand CSS with HTML5, so logically it still belongs in the stylesheet partial.)</p>

<div class="label" id="code:stylesheets_partial"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.8.</span> <span class="description">A partial for stylesheet includes. <br /> <code>app/views/layouts/_stylesheets.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 9]&gt;</span>
<span class="c">&lt;script src=&quot;http://html5shiv.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;</span>
<span class="c">&lt;![endif]--&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/screen&#39;</span><span class="p">,</span> <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;screen&#39;</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/print&#39;</span><span class="p">,</span>  <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;print&#39;</span> <span class="cp">%&gt;</span>
<span class="c">&lt;!--[if lt IE 8]&gt;</span><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;blueprint/ie&#39;</span> <span class="cp">%&gt;</span><span class="c">&lt;![endif]--&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">&#39;custom&#39;</span><span class="p">,</span> <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s1">&#39;screen&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div></div>


<p>Similarly, we can move the header material into the partial shown in <a class="ref" href="filling-in-the-layout#code:header_partial">Listing&nbsp;5.9</a> and insert it into the layout with another call to <code>render</code>:</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/header&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div>




<div class="label" id="code:header_partial"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.9.</span> <span class="description">A partial for the site header. <br /> <code>app/views/layouts/_header.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;header&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;logo.png&quot;</span><span class="p">,</span> <span class="ss">:alt</span> <span class="o">=&gt;</span> <span class="s2">&quot;Sample App&quot;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;round&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Help&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign in&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/header&gt;</span>
</pre></div>
</div></div>


<p>Now that we know how to make partials, let&rsquo;s add a site footer to go along with the header. By now you can probably guess that we&rsquo;ll call it <code>_footer.html.erb</code> and put it in the layouts directory (<a class="ref" href="filling-in-the-layout#code:footer_partial">Listing&nbsp;5.10</a>).</p>

<div class="label" id="code:footer_partial"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.10.</span> <span class="description">A partial for the site footer. <br /> <code>app/views/layouts/_footer.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;footer&gt;</span>
  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;About&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Contact&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://news.railstutorial.org/&quot;</span><span class="nt">&gt;</span>News<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.railstutorial.org/&quot;</span><span class="nt">&gt;</span>Rails Tutorial<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</pre></div>
</div></div>


<p>As with the header, in the footer we&rsquo;ve used <code>link_to</code> for the internal links to the About and Contact pages and stubbed out the URLs with <code>&rsquo;#&rsquo;</code> for now. (As with <code>header</code>, the <code>footer</code> tag is new in HTML5.)</p>

<p>We can render the footer partial in the layout by following the same pattern as the stylesheets and header partials (<a class="ref" href="filling-in-the-layout#code:layout_with_footer">Listing&nbsp;5.11</a>).</p>

<div class="label" id="code:layout_with_footer"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.11.</span> <span class="description">The site layout with a footer partial. <br /> <code>app/views/layouts/application.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tag</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/stylesheets&#39;</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/header&#39;</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
        <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/section&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">&#39;layouts/footer&#39;</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div></div>


<p>Of course, the footer will be ugly without some styling (<a class="ref" href="filling-in-the-layout#code:footer_css">Listing&nbsp;5.12</a>). The results appear in <a class="ref" href="filling-in-the-layout#fig:site_with_footer">Figure&nbsp;5.8</a>.</p>

<div class="label" id="code:footer_css"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.12.</span> <span class="description">Adding the CSS for the site footer. <br /> <code>public/stylesheets/custom.css</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="nt">footer</span> <span class="p">{</span>
  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
  <span class="k">margin-top</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">710px</span><span class="p">;</span>
  <span class="k">margin-left</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
  <span class="k">margin-right</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="nt">nav</span> <span class="p">{</span>
  <span class="k">float</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div></div>


<p>Note here the rule</p>

<div class="code"><div class="highlight"><pre><span class="nt">footer</span> <span class="nt">nav</span> <span class="p">{</span>
  <span class="k">float</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>that overrides the previous rule</p>

<div class="code"><div class="highlight"><pre><span class="nt">nav</span> <span class="p">{</span>
  <span class="k">float</span><span class="o">:</span> <span class="k">right</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>


<p>so that the footer is centered in the bottom of the page rather than pushed off to the right like the navigation in the header. This convention of having a succession of rules, with subsequent rules possibly overriding previous ones, is what puts the <em>cascading</em> in cascading style sheets.</p>

<div class="label" id="fig:site_with_footer"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/site_with_footer.png" alt="site_with_footer" /></span></div><div class="caption"><span class="header">Figure 5.8: </span><span class="description">The Home page (<a href="http://localhost:3000/pages/home"><tt>/pages/home</tt></a>) with an added footer.&nbsp;<a href="http://railstutorial.org/images/figures/site_with_footer-full.png">(full size)</a></span></div></div>




<div class="label" id="sec:layout_links"></div>


<h2><a id="sec:5.2" href="filling-in-the-layout#sec:layout_links" class="heading"><span class="number">5.2</span> Layout links</a></h2>


<p>Now that we&rsquo;ve finished a site layout with decent styling, it&rsquo;s time to start filling in the links we&rsquo;ve stubbed out with <code>&rsquo;#&rsquo;</code>. Of course, we could hard-code links like</p>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/pages/about&quot;</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>


<p>but that isn&rsquo;t the Rails Way. For one, it would be nice if the URL for the about page were <tt>/about</tt> rather than <tt>/pages/about</tt>; moreover, Rails conventionally uses <em>named routes</em>, which involves code like</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;About&quot;</span><span class="p">,</span> <span class="n">about_path</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>This way the code has a more transparent meaning, and it&rsquo;s also more flexible since we can change the definition of <code>about_path</code> and have the URL change everywhere <code>about_path</code> is used.</p>

<p>The full list of our planned links appears in <a class="ref" href="filling-in-the-layout#table:url_mapping">Table&nbsp;5.1</a>, along with their mapping to URLs and routes. We&rsquo;ll implement all but the last one by the end of this chapter. (We&rsquo;ll make the last one in <a class="ref" href="sign-in-sign-out#top">Chapter&nbsp;9</a>.)</p>

<div class="label" id="table:url_mapping"></div>


<div class="table"><div class="center"><table class="tabular"><tr><th class="align_left"><strong>Page</strong></th><th class="align_left"><strong>URL</strong></th><th class="align_right"><strong>Named route</strong></th></tr><tr class="top_bar"><td class="align_left">Home</td><td class="align_left"><tt>/</tt></td><td class="align_right"><code>root_path</code></td></tr><tr><td class="align_left">About</td><td class="align_left"><tt>/about</tt></td><td class="align_right"><code>about_path</code></td></tr><tr><td class="align_left">Contact</td><td class="align_left"><tt>/contact</tt></td><td class="align_right"><code>contact_path</code></td></tr><tr><td class="align_left">Help</td><td class="align_left"><tt>/help</tt></td><td class="align_right"><code>help_path</code></td></tr><tr><td class="align_left">Sign up</td><td class="align_left"><tt>/signup</tt></td><td class="align_right"><code>signup_path</code></td></tr><tr><td class="align_left">Sign in</td><td class="align_left"><tt>/signin</tt></td><td class="align_right"><code>signin_path</code></td></tr></table></div><div class="caption"><span class="header">Table 5.1: </span><span class="description">Route and URL mapping for site links.</span></div></div>




<div class="label" id="sec:integration_tests"></div>


<h3><a id="sec:5.2.1" href="filling-in-the-layout#sec:integration_tests" class="heading"><span class="number">5.2.1</span> Integration tests</a></h3>


<p>Before writing the routes for our application, we&rsquo;ll continue with our test-driven development by writing some tests for them. There are several ways to test routes, and we&rsquo;re going to take this opportunity to introduce <em>integration tests</em>, which give us a way to simulate a browser accessing our application and thereby test it from end to end. As we&rsquo;ll see starting in <a class="ref" href="sign-up#sec:rspec_integration_tests">Section&nbsp;8.4</a>, testing routes is just the beginning.</p>

<p>We start by generating an integration test for the sample application&rsquo;s layout links:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails generate integration_test layout_links
<span class="go">      invoke  rspec</span>
<span class="go">      create    spec/requests/layout_links_spec.rb</span>
</pre></div>
</div>


<p>Note that the generator automatically appends <code>_spec.rb</code> to the name of our test file, yielding <code>spec/requests/layout_links_spec.rb</code>. (In RSpec, integration tests are also called <em>request specs</em>; the origins of this terminology are obscure to me.)</p>

<p>Our integration test will use the same <code>get</code> function we used in <a class="ref" href="static-pages#sec:first_tests">Section&nbsp;3.2</a> in the Pages controller spec, with code like this:</p>

<div class="code"><div class="highlight"><pre><span class="n">describe</span> <span class="s2">&quot;GET &#39;home&#39;&quot;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="s2">&quot;should be successful&quot;</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">&#39;home&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">be_success</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>


<p>In this section, we want to test URLs like&nbsp;<tt>/</tt> and <tt>/about</tt>, but you can&rsquo;t <code>get</code> these URLs inside a controller test&mdash;controller tests only know about URLs defined for that exact controller. In contrast, integration tests are bound by no such restriction, since they are designed as <em>integrated</em> tests for the whole application and hence can <code>get</code> any page they want.</p>

<p>Following the model of the Pages controller spec, we can write an integration spec for each of the pages in <a class="ref" href="filling-in-the-layout#table:url_mapping">Table&nbsp;5.1</a> that we&rsquo;ve already created, namely, Home, About, Contact, and Help. To make sure the right page (i.e., view) is rendered in each case, we&rsquo;ll check for the correct title using <code>have_selector</code>. The test definitions appear in <a class="ref" href="filling-in-the-layout#code:layout_links_spec">Listing&nbsp;5.13</a>.</p>

<div class="label" id="code:layout_links_spec"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.13.</span> <span class="description">Integration test for routes. <br /> <code>spec/requests/layout_links_spec.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;LayoutLinks&quot;</span> <span class="k">do</span>

  <span class="n">it</span> <span class="s2">&quot;should have a Home page at &#39;/&#39;&quot;</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">&#39;/&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;Home&quot;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">&quot;should have a Contact page at &#39;/contact&#39;&quot;</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">&#39;/contact&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;Contact&quot;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">&quot;should have an About page at &#39;/about&#39;&quot;</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">&#39;/about&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;About&quot;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">&quot;should have a Help page at &#39;/help&#39;&quot;</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">&#39;/help&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;Help&quot;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Of course, at this point they should fail (Red); we&rsquo;ll get them to Green in <a class="ref" href="filling-in-the-layout#sec:rails_routes">Section&nbsp;5.2.2</a>.</p>

<p>By the way, if you don&rsquo;t have a Help page at this point, now would be a good time to add one. (If you solved the <a class="ref" href="static-pages#top">Chapter&nbsp;3</a> exercises in <a class="ref" href="static-pages#sec:static_pages_exercises">Section&nbsp;3.5</a>, you already have one.) First, add the <code>help</code> action to the Pages controller (<a class="ref" href="filling-in-the-layout#code:help_action">Listing&nbsp;5.14</a>). Then, create the corresponding view (<a class="ref" href="filling-in-the-layout#code:help_view">Listing&nbsp;5.15</a>).</p>

<div class="label" id="code:help_action"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.14.</span> <span class="description">Adding the <code>help</code> action to the Pages controller. <br /> <code>app/controllers/pages_controller.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PagesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="k">def</span> <span class="nf">help</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="s2">&quot;Help&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code:help_view"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.15.</span> <span class="description">Adding a view for the Help page. <br /> <code>app/views/pages/help.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Help<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>
  Get help on Ruby on Rails Tutorial at the
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/help&quot;</span><span class="nt">&gt;</span>Rails Tutorial help page<span class="nt">&lt;/a&gt;</span>.
  To get help on this sample app, see the
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/book&quot;</span><span class="nt">&gt;</span>Rails Tutorial book<span class="nt">&lt;/a&gt;</span>.
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div></div>


<p>There&rsquo;s one final detail to deal with before moving on: if you&rsquo;re running Autotest, you might notice that it doesn&rsquo;t run the integration test. This is by design, since integration tests can be slow and hence can disrupt the red-green-refactor cycle, but I still find it preferable to have Autotest run the integration tests. To arrange for this to happen, you just have to tell Autotest to run tests in the <code>spec/requests</code> directory (<a class="ref" href="filling-in-the-layout#code:autotest_integration">Listing&nbsp;5.16</a> or <a class="ref" href="filling-in-the-layout#code:autotest_integration_linux">Listing&nbsp;5.17</a>).</p>

<div class="label" id="code:autotest_integration"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.16.</span> <span class="description">Additions to <code>.autotest</code> needed to run integration tests with Autotest on OS&nbsp;X.</span>       
</div>
<div class="code"><div class="highlight"><pre><span class="no">Autotest</span><span class="o">.</span><span class="n">add_hook</span> <span class="ss">:initialize</span> <span class="k">do</span> <span class="o">|</span><span class="n">autotest</span><span class="o">|</span>
  <span class="n">autotest</span><span class="o">.</span><span class="n">add_mapping</span><span class="p">(</span><span class="sr">/^spec\/requests\/.*_spec\.rb$/</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">autotest</span><span class="o">.</span><span class="n">files_matching</span><span class="p">(</span><span class="sr">/^spec\/requests\/.*_spec\.rb$/</span><span class="p">)</span>
  <span class="k">end</span>  
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code:autotest_integration_linux"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.17.</span> <span class="description">Additions to <code>.autotest</code> needed to run integration tests with Autotest on Ubuntu Linux.</span>       
</div>
<div class="code"><div class="highlight"><pre><span class="no">Autotest</span><span class="o">.</span><span class="n">add_hook</span> <span class="ss">:initialize</span> <span class="k">do</span> <span class="o">|</span><span class="n">autotest</span><span class="o">|</span>
  <span class="n">autotest</span><span class="o">.</span><span class="n">add_mapping</span><span class="p">(</span><span class="sr">%r%^spec/(requests)/.*rb$%</span><span class="p">)</span> <span class="k">do</span><span class="o">|</span><span class="n">filename</span><span class="p">,</span> <span class="n">_</span><span class="o">|</span>
    <span class="n">filename</span>
  <span class="k">end</span>
<span class="k">end</span> 
</pre></div>
</div></div>


<p>Don&rsquo;t worry about where this code comes from; I don&rsquo;t know the Autotest API either. At some point I Googled around with search terms like &ldquo;rspec autotest integration&rdquo; and found it, and when I dropped it into my <code>.autotest</code> file, it worked.</p>

<div class="label" id="sec:rails_routes"></div>


<h3><a id="sec:5.2.2" href="filling-in-the-layout#sec:rails_routes" class="heading"><span class="number">5.2.2</span> Rails routes</a></h3>


<p>Now that we have tests for the URLs we want, it&rsquo;s time to get them to work. As noted in <a class="ref" href="static-pages#sec:static_pages_with_rails">Section&nbsp;3.1.2</a>, the file Rails uses for URL mappings is <code>config/routes.rb</code>. If you take a look at the default routes file, you&rsquo;ll see that it&rsquo;s quite a mess, but it&rsquo;s a useful mess&mdash;full of commented-out example route mappings. I suggest reading through it at some point, and I also suggest taking a look at the <a href="http://guides.rubyonrails.org/routing.html">Rails Guides article &ldquo;Rails Routing from the outside in&rdquo;</a> for a much more in-depth treatment of routes. For now, though, we&rsquo;ll stick with the examples in <a class="ref" href="filling-in-the-layout#code:static_page_routes">Listing&nbsp;5.18</a>.<sup class="footnote" id="fnref:5.9"><a href="#fn:5.9">9</a></sup></p>

<div class="label" id="code:static_page_routes"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.18.</span> <span class="description">Routes for static pages. <br /> <code>config/routes.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="no">SampleApp</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">match</span> <span class="s1">&#39;/contact&#39;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#contact&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span>   <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#about&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/help&#39;</span><span class="p">,</span>    <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#help&#39;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p><a class="ref" href="filling-in-the-layout#code:static_page_routes">Listing&nbsp;5.18</a> contains custom routes for the <code>contact</code>, <code>about</code>, and <code>help</code> pages; we&rsquo;ll take care of the home page itself in <a class="ref" href="filling-in-the-layout#code:root_route">Listing&nbsp;5.20</a>. (Since we&rsquo;ll be using the custom routes in <a class="ref" href="filling-in-the-layout#code:static_page_routes">Listing&nbsp;5.18</a> exclusively from now on, we&rsquo;ve taken this opportunity to remove the Pages controller routes (<code>get "pages/home"</code>, etc.) last seen in <a class="ref" href="static-pages#code:about_route">Listing&nbsp;3.17</a>.)</p>

<p>If you read the code in <a class="ref" href="filling-in-the-layout#code:static_page_routes">Listing&nbsp;5.18</a> carefully, you can probably figure out what it does; for example, you can see that</p>

<div class="code"><div class="highlight"><pre><span class="n">match</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#about&#39;</span>
</pre></div>
</div>


<p>matches <code>&rsquo;/about&rsquo;</code> and routes it to the <code>about</code> action in the Pages controller.  Before, this was more explicit: we used <code>get &rsquo;pages/about&rsquo;</code> to get to the same place, but <code>/about</code> is more succinct. What isn&rsquo;t obvious is that <code>match &rsquo;/about&rsquo;</code> also automatically creates <em>named routes</em> for use in the controllers and views:</p>

<div class="code"><div class="highlight"><pre><span class="n">about_path</span> <span class="o">=&gt;</span> <span class="s1">&#39;/about&#39;</span>
<span class="n">about_url</span>  <span class="o">=&gt;</span> <span class="s1">&#39;http://localhost:3000/about&#39;</span>
</pre></div>
</div>


<p>Note that <code>about_url</code> is the <em>full</em> URL <tt>http://localhost:3000/about</tt> (with <code>localhost:3000</code> being replaced with the domain name, such as <code>example.com</code>, for a fully deployed site). As discussed in <a class="ref" href="filling-in-the-layout#sec:layout_links">Section&nbsp;5.2</a>, to get just <tt>/about</tt>, you use <code>about_path</code>. (<em>Rails Tutorial</em> uses the <code>path</code> form for consistency, but the difference rarely matters in practice.)</p>

<p>With these routes now defined, the tests for the About, Contact, and Help pages should pass. (As usual, use Autotest or <code>rspec spec/</code> to check.) This leaves the test for the Home page.</p>

<p>To establish the route mapping for the Home page, we <em>could</em> use code like this:</p>

<div class="code"><div class="highlight"><pre><span class="n">match</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#home&#39;</span>
</pre></div>
</div>


<p>This is unnecessary, though; Rails has special instructions for the root URL&nbsp;<tt>/</tt> (&ldquo;slash&rdquo;) located lower down in the file (<a class="ref" href="filling-in-the-layout#code:root_route_hint">Listing&nbsp;5.19</a>).</p>

<div class="label" id="code:root_route_hint"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.19.</span> <span class="description">The commented-out hint for defining the root route. <br /> <code>config/routes.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="no">SampleApp</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="c1"># You can have the root of your site routed with &quot;root&quot;</span>
  <span class="c1"># just remember to delete public/index.html.</span>
  <span class="c1"># root :to =&gt; &quot;welcome#index&quot;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Using <a class="ref" href="filling-in-the-layout#code:root_route_hint">Listing&nbsp;5.19</a> as a model, we arrive at <a class="ref" href="filling-in-the-layout#code:root_route">Listing&nbsp;5.20</a> to route the root URL&nbsp;<tt>/</tt> to the Home page.</p>

<div class="label" id="code:root_route"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.20.</span> <span class="description">Adding a mapping for the root route. <br /> <code>config/routes.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="no">SampleApp</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">match</span> <span class="s1">&#39;/contact&#39;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#contact&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span>   <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#about&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/help&#39;</span><span class="p">,</span>    <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#help&#39;</span>

  <span class="n">root</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#home&#39;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>This code maps the root URL&nbsp;<tt>/</tt> to <tt>/pages/home</tt>, and also gives URL helpers as follows:</p>

<div class="code"><div class="highlight"><pre><span class="n">root_path</span> <span class="o">=&gt;</span> <span class="s1">&#39;/&#39;</span>
<span class="n">root_url</span>  <span class="o">=&gt;</span> <span class="s1">&#39;http://localhost:3000/&#39;</span>
</pre></div>
</div>


<p>We should also heed the comment in <a class="ref" href="filling-in-the-layout#code:root_route_hint">Listing&nbsp;5.19</a> and delete <code>public/index.html</code> to prevent Rails from rendering the default page (<a class="ref" href="beginning#fig:riding_rails_3">Figure&nbsp;1.3</a>) when we visit&nbsp;<tt>/</tt>. You can of course simply remove the file by trashing it, but if you&rsquo;re using Git for version control there&rsquo;s a way to tell Git about the removal at the same time using <code>git rm</code>:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git rm public/index.html
<span class="gp">$</span> git commit -am <span class="s2">&quot;Removed default Rails page&quot;</span>
</pre></div>
</div>


<p>You may recall from <a class="ref" href="beginning#sec:git_commands">Section&nbsp;1.3.5</a> that we used the Git command <code>git commit -a -m "Message"</code>, with flags for &ldquo;all changes&rdquo; (<code>-a</code>) and a message (<code>-m</code>). As shown above, Git also lets us roll the two flags into one using <code>git commit -am "Message"</code>.</p>

<p>With that, all of the routes for static pages are working, and the tests should pass. Now we just have to fill in the links in the layout.</p>

<div class="label" id="sec:named_routes"></div>


<h3><a id="sec:5.2.3" href="filling-in-the-layout#sec:named_routes" class="heading"><span class="number">5.2.3</span> Named routes</a></h3>


<p>Let&rsquo;s put the named routes created in <a class="ref" href="filling-in-the-layout#sec:rails_routes">Section&nbsp;5.2.2</a> to work in our layout. This will entail filling in the second arguments of the <code>link_to</code> functions with the proper named routes. For example, we&rsquo;ll convert</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;About&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>to</p>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;About&quot;</span><span class="p">,</span> <span class="n">about_path</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>and so on.</p>

<p>We&rsquo;ll start in the header partial, <code>_header.html.erb</code> (<a class="ref" href="filling-in-the-layout#code:header_partial_links">Listing&nbsp;5.21</a>), which has links to the Home and Help pages. While we&rsquo;re at it, we&rsquo;ll follow a common web convention and link the logo image to the Home page as well.</p>

<div class="label" id="code:header_partial_links"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.21.</span> <span class="description">Header partial with links. <br /> <code>app/views/layouts/_header.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;header&gt;</span>
  <span class="cp">&lt;%</span> <span class="n">logo</span> <span class="o">=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;logo.png&quot;</span><span class="p">,</span> <span class="ss">:alt</span> <span class="o">=&gt;</span> <span class="s2">&quot;Sample App&quot;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;round&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">logo</span><span class="p">,</span> <span class="n">root_path</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span> <span class="n">root_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Help&quot;</span><span class="p">,</span> <span class="n">help_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign in&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/header&gt;</span>
</pre></div>
</div></div>


<p>We won&rsquo;t have a named route for the &ldquo;Sign in&rdquo; link until <a class="ref" href="sign-in-sign-out#top">Chapter&nbsp;9</a>, so we&rsquo;ve left it as <code>&rsquo;#&rsquo;</code> for now. Note that this code defines the local variable <code>logo</code> for the logo image tag, and then links to it in the next line:</p>

<div class="code"><div class="highlight"><pre>  <span class="cp">&lt;%</span> <span class="n">logo</span> <span class="o">=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;logo.png&quot;</span><span class="p">,</span> <span class="ss">:alt</span> <span class="o">=&gt;</span> <span class="s2">&quot;Sample App&quot;</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;round&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">logo</span><span class="p">,</span> <span class="n">root_path</span> <span class="cp">%&gt;</span>
</pre></div>
</div>


<p>This is a little cleaner than stuffing it all into one line. It&rsquo;s especially important to notice that the ERb for the variable assignment doesn&rsquo;t have an equals sign; it&rsquo;s just <tt class="verb">&lt;% ... %&gt;</tt>, because we don&rsquo;t want that line inserted into the template. (Using a local variable in this manner is only one way to do it. An even cleaner way might be to define a <code>logo</code> helper; see <a class="ref" href="filling-in-the-layout#sec:layout_exercises">Section&nbsp;5.5</a>.)</p>

<p>The other place with links is the footer partial, <code>_footer.html.erb</code>, which has links for the About and Contact pages (<a class="ref" href="filling-in-the-layout#code:footer_partial_links">Listing&nbsp;5.22</a>).</p>

<div class="label" id="code:footer_partial_links"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.22.</span> <span class="description">Footer partial with links. <br /> <code>app/views/layouts/_footer.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;footer&gt;</span>
  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;About&quot;</span><span class="p">,</span> <span class="n">about_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Contact&quot;</span><span class="p">,</span> <span class="n">contact_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://news.railstutorial.org/&quot;</span><span class="nt">&gt;</span>News<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.railstutorial.org/&quot;</span><span class="nt">&gt;</span>Rails Tutorial<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</pre></div>
</div></div>


<p>With that, our layout has links to all the static pages created in <a class="ref" href="static-pages#top">Chapter&nbsp;3</a>, so that, for example, <a href="http://localhost:3000/about"><tt>/about</tt></a> goes to the About page (<a class="ref" href="filling-in-the-layout#fig:about_page">Figure&nbsp;5.9</a>).</p>

<p>By the way, it&rsquo;s worth noting that, although we haven&rsquo;t actually tested for the presence of the links on the layout, our tests will fail if the routes aren&rsquo;t defined. You can check this by commenting out the routes in <a class="ref" href="filling-in-the-layout#code:static_page_routes">Listing&nbsp;5.18</a> and running your test suite. For a testing method that actually makes sure the links go to the right places, see <a class="ref" href="filling-in-the-layout#sec:layout_exercises">Section&nbsp;5.5</a>.</p>

<div class="label" id="fig:about_page"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/about_page.png" alt="about_page" /></span></div><div class="caption"><span class="header">Figure 5.9: </span><span class="description">The About page at  <a href="http://localhost:3000/about"><tt>/about</tt></a>.&nbsp;<a href="http://railstutorial.org/images/figures/about_page-full.png">(full size)</a></span></div></div>




<div class="label" id="sec:user_signup"></div>


<h2><a id="sec:5.3" href="filling-in-the-layout#sec:user_signup" class="heading"><span class="number">5.3</span> User signup: A first step</a></h2>


<p>As a capstone to our work on the layout and routing, in this section we&rsquo;ll make a route for the signup page, which will mean creating a second controller along the way. This is a first important step toward allowing users to register for our site; we&rsquo;ll take the next step, modeling users, in <a class="ref" href="modeling-and-viewing-users-one#top">Chapter&nbsp;6</a>, and we&rsquo;ll finish the job in <a class="ref" href="sign-up#top">Chapter&nbsp;8</a>.</p>

<div class="label" id="sec:users_controller"></div>


<h3><a id="sec:5.3.1" href="filling-in-the-layout#sec:users_controller" class="heading"><span class="number">5.3.1</span> Users controller</a></h3>


<p>It&rsquo;s been a while since we created our first controller, the Pages controller, way back in <a class="ref" href="static-pages#sec:static_pages_with_rails">Section&nbsp;3.1.2</a>. It&rsquo;s time to create a second one, the Users controller. As before, we&rsquo;ll use <code>generate</code> to make the simplest controller that meets our present needs, namely, one with a stub signup page for new users. Following the conventional <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">REST architecture</a> favored by Rails, we&rsquo;ll call the action for new users <code>new</code> and pass it as an argument to <code>generate controller</code> to create it automatically (<a class="ref" href="filling-in-the-layout#code:generate_users_controller">Listing&nbsp;5.23</a>).</p>

<div class="label" id="code:generate_users_controller"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.23.</span> <span class="description">Generating a Users controller (with a <code>new</code> action).</span> </div>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails generate controller Users new
<span class="go">      create  app/controllers/users_controller.rb</span>
<span class="go">       route  get &quot;users/new&quot;</span>
<span class="go">      invoke  erb</span>
<span class="go">      create    app/views/users</span>
<span class="go">      create    app/views/users/new.html.erb</span>
<span class="go">      invoke  rspec</span>
<span class="go">      create    spec/controllers/users_controller_spec.rb</span>
<span class="go">      create    spec/views/users</span>
<span class="go">      create    spec/views/users/new.html.erb_spec.rb</span>
<span class="go">      invoke  helper</span>
<span class="go">      create    app/helpers/users_helper.rb</span>
<span class="go">      invoke    rspec</span>
<span class="go">      create    spec/helpers/users_helper_spec.rb</span>
</pre></div>
</div></div>


<p>As with the Pages controller, this generates view and helper specs that we won&rsquo;t need, so remove them:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rm -rf spec/views
<span class="gp">$</span> rm -rf spec/helpers
</pre></div>
</div>


<p>The controller generator makes both the Users controller and a useful default test, which verifies that the <code>new</code> action responds properly to a <tt>GET</tt> request (<a class="ref" href="static-pages#sidebar:get_etc">Box&nbsp;3.1</a>); the code appears in <a class="ref" href="filling-in-the-layout#code:get_new_user_spec">Listing&nbsp;5.24</a>. This code should look familiar; it follows the exact same form as the Pages controller spec last seen in <a class="ref" href="static-pages#sec:testing_a_title_change">Section&nbsp;3.3.1</a> (<a class="ref" href="static-pages#code:pages_controller_spec_title">Listing&nbsp;3.20</a>).</p>

<div class="label" id="code:get_new_user_spec"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.24.</span> <span class="description">Testing the signup page. <br /> <code>spec/controllers/users_controller_spec.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="no">UsersController</span> <span class="k">do</span>

  <span class="n">describe</span> <span class="s2">&quot;GET &#39;new&#39;&quot;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s2">&quot;should be successful&quot;</span> <span class="k">do</span>
      <span class="n">get</span> <span class="s1">&#39;new&#39;</span>
      <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">be_success</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>By construction, the Users controller already has the proper <code>new</code> action and <code>new.html.erb</code> template to get this test to pass (<a class="ref" href="filling-in-the-layout#code:new_user_action">Listing&nbsp;5.25</a>).  (To view the page at <a href="http://localhost:3000/users/new"><tt>/users/new</tt></a>, you might have to restart the server.)</p>

<div class="label" id="code:new_user_action"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.25.</span> <span class="description">Action for the new user (signup) page. <br /> <code>app/controllers/users_controller.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UsersController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">new</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</div></div>


<p>To get back in the spirit of test-driven development, let&rsquo;s add a second (failing) test of our own by testing for a title that contains the string <code>"Sign up"</code> (<a class="ref" href="filling-in-the-layout#code:signup_title_test">Listing&nbsp;5.26</a>). Be sure to add <code>render_views</code> as we did in the Pages controller spec (<a class="ref" href="static-pages#code:pages_controller_spec_title">Listing&nbsp;3.20</a>); otherwise, the test won&rsquo;t pass even after we add the proper title.</p>

<div class="label" id="code:signup_title_test"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.26.</span> <span class="description">A test for the signup page title. <br /> <code>spec/controllers/users_controller_spec.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="no">UsersController</span> <span class="k">do</span>
  <span class="n">render_views</span>

  <span class="n">describe</span> <span class="s2">&quot;GET &#39;new&#39;&quot;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s2">&quot;should be successful&quot;</span> <span class="k">do</span>
      <span class="n">get</span> <span class="s1">&#39;new&#39;</span>
      <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">be_success</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">&quot;should have the right title&quot;</span> <span class="k">do</span>
      <span class="n">get</span> <span class="s1">&#39;new&#39;</span>
      <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;Sign up&quot;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>This test uses the <code>have_selector</code> method we&rsquo;ve seen before (<a class="ref" href="static-pages#sec:testing_a_title_change">Section&nbsp;3.3.1</a>); note that, as in <a class="ref" href="static-pages#sec:testing_a_title_change">Section&nbsp;3.3.1</a>, <code>have_selector</code> needs the <code>render_views</code> line since it tests the view along with the action.</p>

<p>Of course, by design this test currently fails (Red). To get a custom title, we need to make an <code>@title</code> instance variable as in <a class="ref" href="static-pages#sec:instance_variables_embedded_ruby">Section&nbsp;3.3.3</a>. We can thus get to Green with the code in <a class="ref" href="filling-in-the-layout#code:new_user_title">Listing&nbsp;5.27</a>.</p>

<div class="label" id="code:new_user_title"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.27.</span> <span class="description">Setting the custom title for the new user page. <br /> <code>app/controllers/users_controller.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UsersController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="s2">&quot;Sign up&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="sec:signup_url"></div>


<h3><a id="sec:5.3.2" href="filling-in-the-layout#sec:signup_url" class="heading"><span class="number">5.3.2</span> Signup URL</a></h3>


<p>With the code from <a class="ref" href="filling-in-the-layout#sec:users_controller">Section&nbsp;5.3.1</a>, we already have a working page for new users at <tt>/users/new</tt>, but recall from <a class="ref" href="filling-in-the-layout#table:url_mapping">Table&nbsp;5.1</a> that we want the URL to be <tt>/signup</tt> instead. As in <a class="ref" href="filling-in-the-layout#sec:layout_links">Section&nbsp;5.2</a>, we&rsquo;ll first write a test (<a class="ref" href="filling-in-the-layout#code:user_signup_spec">Listing&nbsp;5.28</a>).</p>

<div class="label" id="code:user_signup_spec"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.28.</span> <span class="description">Simple integration test for user signup link. <br /> <code>spec/requests/layout_links_spec.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;LayoutLinks&quot;</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="n">it</span> <span class="s2">&quot;should have a signup page at &#39;/signup&#39;&quot;</span> <span class="k">do</span>
    <span class="n">get</span> <span class="s1">&#39;/signup&#39;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;Sign up&quot;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Note that this is the <em>same</em> file as the one used for the other layout links, even though the Signup page is in a different controller. Being able to hit pages in multiple controllers is one of the advantages of using integration tests.</p>

<p>The last step is to make a named route for signups. We&rsquo;ll follow the examples from <a class="ref" href="filling-in-the-layout#code:static_page_routes">Listing&nbsp;5.18</a> and add a <code>match &rsquo;/signup&rsquo;</code> rule for the signup URL (<a class="ref" href="filling-in-the-layout#code:signup_route">Listing&nbsp;5.29</a>).</p>

<div class="label" id="code:signup_route"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.29.</span> <span class="description">A route for the signup page. <br /> <code>config/routes.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="no">SampleApp</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">&quot;users/new&quot;</span>

  <span class="n">match</span> <span class="s1">&#39;/signup&#39;</span><span class="p">,</span>  <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;users#new&#39;</span>

  <span class="n">match</span> <span class="s1">&#39;/contact&#39;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#contact&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span>   <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#about&#39;</span>
  <span class="n">match</span> <span class="s1">&#39;/help&#39;</span><span class="p">,</span>    <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#help&#39;</span>

  <span class="n">root</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages#home&#39;</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div>
</div></div>


<p>Note that we have kept the rule <code>get "users/new"</code>, which was generated automatically by the Users controller generation in <a class="ref" href="filling-in-the-layout#code:generate_users_controller">Listing&nbsp;5.23</a>. Currently, this rule is necessary to route <tt>/users/new</tt> correctly, but it doesn&rsquo;t follow the proper REST conventions (<a class="ref" href="a-demo-app#table:demo_RESTful_users">Table&nbsp;2.2</a>), and we will eliminate it in <a class="ref" href="modeling-and-viewing-users-one#sec:a_users_resource">Section&nbsp;6.3.3</a>.</p>

<p>At this point, the signup test in <a class="ref" href="filling-in-the-layout#code:user_signup_spec">Listing&nbsp;5.28</a> should pass. All that&rsquo;s left is to add the proper link to the button on the Home page. As with the other routes, <code>match &rsquo;/signup&rsquo;</code> gives us the named route <code>signup_path</code>, which we put to use in <a class="ref" href="filling-in-the-layout#code:home_page_signup_link">Listing&nbsp;5.30</a>.</p>

<div class="label" id="code:home_page_signup_link"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.30.</span> <span class="description">Linking the button to the Signup page. <br /> <code>app/views/pages/home.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Sample App<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span>
  This is the home page for the
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://railstutorial.org/&quot;</span><span class="nt">&gt;</span>Ruby on Rails Tutorial<span class="nt">&lt;/a&gt;</span>
  sample application.
<span class="nt">&lt;/p&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign up now!&quot;</span><span class="p">,</span> <span class="n">signup_path</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;signup_button round&quot;</span> <span class="cp">%&gt;</span>
</pre></div>
</div></div>


<p>With that, we&rsquo;re done with the links and named routes, at least until we add a route for signing in (<a class="ref" href="sign-in-sign-out#top">Chapter&nbsp;9</a>). The resulting new user page (at the URL <tt>/signup</tt>) appears in <a class="ref" href="filling-in-the-layout#fig:blank_signup_page">Figure&nbsp;5.10</a>.</p>

<div class="label" id="fig:blank_signup_page"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/blank_signup_page.png" alt="blank_signup_page" /></span></div><div class="caption"><span class="header">Figure 5.10: </span><span class="description">The new signup page at  <a href="http://localhost:3000/signup"><tt>/signup</tt></a>.&nbsp;<a href="http://railstutorial.org/images/figures/blank_signup_page-full.png">(full size)</a></span></div></div>




<div class="label" id="sec:layout_conclusion"></div>


<h2><a id="sec:5.4" href="filling-in-the-layout#sec:layout_conclusion" class="heading"><span class="number">5.4</span> Conclusion</a></h2>


<p>In this chapter, we&rsquo;ve hammered our application layout into shape and polished up the routes. The rest of the book is dedicated to fleshing out the sample application: first, by adding users who can sign up, sign in, and sign out; next, by adding user microposts; and, finally, by adding user relationships.</p>

<p>If you&rsquo;re following along with Git, be sure to commit and merge (and, just to be paranoid, run your tests first):</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/
<span class="gp">$</span> git add .
<span class="gp">$</span> git commit -m <span class="s2">&quot;Finished layout and routes&quot;</span>
<span class="gp">$</span> git checkout master
<span class="gp">$</span> git merge filling-in-layout
</pre></div>
</div>


<p>You might also want to push up to GitHub, or deploy to Heroku:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push
<span class="gp">$</span> git push heroku
</pre></div>
</div>




<div class="label" id="sec:layout_exercises"></div>


<h2><a id="sec:5.5" href="filling-in-the-layout#sec:layout_exercises" class="heading"><span class="number">5.5</span> Exercises</a></h2>




<ol>
<li>Replace the local variable <code>logo</code> in <a class="ref" href="filling-in-the-layout#code:header_partial_links">Listing&nbsp;5.21</a> with a helper method of the same name, so that the new partial looks like <a class="ref" href="filling-in-the-layout#code:header_partial_logo">Listing&nbsp;5.31</a>. Use the code in <a class="ref" href="filling-in-the-layout#code:logo_helper_stub">Listing&nbsp;5.32</a> to help you get started.</li>

<li>You may have noticed that our tests for the layout links test the routing but don&rsquo;t actually check that the links on the layout go to the right pages. One way to implement these tests is to use <code>visit</code> and <code>click_link</code> inside the RSpec integration test. Fill in the code in <a class="ref" href="filling-in-the-layout#code:layout_links_test">Listing&nbsp;5.33</a> to verify that all the layout links are properly defined.</li>

</ol>




<div class="label" id="code:header_partial_logo"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.31.</span> <span class="description">Header partial with the logo helper from <a class="ref" href="filling-in-the-layout#code:logo_helper_stub">Listing&nbsp;5.32</a>. <br /> <code>app/views/layouts/_header.html.erb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;header&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">logo</span><span class="p">,</span> <span class="n">root_path</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">&quot;round&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span> <span class="n">root_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Help&quot;</span><span class="p">,</span> <span class="n">help_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;Sign in&quot;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/header&gt;</span>
</pre></div>
</div></div>




<div class="label" id="code:logo_helper_stub"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.32.</span> <span class="description">A template for the <code>logo</code> helper. <br /> <code>app/helpers/application_helper.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="k">module</span> <span class="nn">ApplicationHelper</span>

  <span class="k">def</span> <span class="nf">logo</span>
    <span class="c1"># Fill in.</span>
  <span class="k">end</span>

  <span class="c1"># Return a title on a per-page basis.</span>
  <span class="k">def</span> <span class="nf">title</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="label" id="code:layout_links_test"></div>


<div class="codelisting">
<div class="listing"><span class="header">Listing 5.33.</span> <span class="description">A tests for the links on the layout. <br /> <code>spec/requests/layout_links_spec.rb</code></span>       
</div>
<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;LayoutLinks&quot;</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="n">it</span> <span class="s2">&quot;should have the right links on the layout&quot;</span> <span class="k">do</span>
    <span class="n">visit</span> <span class="n">root_path</span>
    <span class="n">click_link</span> <span class="s2">&quot;About&quot;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="ss">:content</span> <span class="o">=&gt;</span> <span class="s2">&quot;About&quot;</span><span class="p">)</span>
    <span class="n">click_link</span> <span class="s2">&quot;Help&quot;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="c1"># fill in</span>
    <span class="n">click_link</span> <span class="s2">&quot;Contact&quot;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="c1"># fill in</span>
    <span class="n">click_link</span> <span class="s2">&quot;Home&quot;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="c1"># fill in</span>
    <span class="n">click_link</span> <span class="s2">&quot;Sign up now!&quot;</span>
    <span class="n">response</span><span class="o">.</span><span class="n">should</span> <span class="c1"># fill in</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div></div>




<div class="navigation">  <a class="prev_page" href="rails-flavored-ruby#top">
    &laquo;&nbsp;<span class="number">Chapter 4</span> Rails-flavored Ruby
  </a>
  <a class="next_page" href="modeling-and-viewing-users-one#top">
    <span class="number">Chapter 6</span> Modeling and viewing users, part I&nbsp;&raquo;
  </a>
</div><div class="footnotes">
<ol>
<li id="fn:5.1">The mockups in <em>Ruby on Rails Tutorial</em> are made with an excellent online mockup application called <a href="http://gomockingbird.com">Mockingbird</a>.&nbsp;<a class="arrow" href="#fnref:5.1">&uarr;</a></li>
<li id="fn:5.2">These are completely unrelated to Ruby classes.&nbsp;<a class="arrow" href="#fnref:5.2">&uarr;</a></li>
<li id="fn:5.3">You might notice that the <code>img</code> tag, rather than looking like <tt class="verb">&lt;img&gt;...&lt;/img&gt;</tt>, instead looks like <tt class="verb">&lt;img ... /&gt;</tt>. Tags that follow this form are known as <em>self-closing</em> tags.&nbsp;<a class="arrow" href="#fnref:5.3">&uarr;</a></li>
<li id="fn:5.4">The <code>alt</code> text is also what will be displayed by screen readers for the visually impaired. Though people are sometimes sloppy about including the <code>alt</code> attribute for images, it is in fact required by the HTML standard. Luckily, Rails includes a default <code>alt</code> attribute; if you don&rsquo;t specify the attribute in the call to <code>image_tag</code>, Rails just uses the image filename (minus extension). In this case, though, <code>Sample App</code> is more descriptive than <code>logo</code>, so I&rsquo;ve elected to set the <code>alt</code> text explicitly.&nbsp;<a class="arrow" href="#fnref:5.4">&uarr;</a></li>
<li id="fn:5.5">Note that Safari and Chrome users will see an indicator of a broken image in place of the &ldquo;Sample App&rdquo; alt text.&nbsp;<a class="arrow" href="#fnref:5.5">&uarr;</a></li>
<li id="fn:5.6">HTML colors can be coded with three base-16 (hexadecimal) numbers, one each for the primary colors red, green, and blue. <code>#fff</code> maxes out all three colors, yielding pure white. See this <a href="http://www.w3schools.com/html/html_colors.asp">HTML colors</a> site for more information.&nbsp;<a class="arrow" href="#fnref:5.6">&uarr;</a></li>
<li id="fn:5.7">Blueprint CSS uses a grid of columns 40 pixels across, 30 pixels for the column itself and 10 pixels of padding. The rightmost column doesn&rsquo;t need padding, so 18 columns is 710 pixels: 18 * 40 &ndash; 10 = 710.&nbsp;<a class="arrow" href="#fnref:5.7">&uarr;</a></li>
<li id="fn:5.8">Many Rails developers use a <code>shared</code> directory for partials shared across different views. I prefer to use the <code>shared</code> folder for utility partials that are useful on multiple views, while putting partials that are literally on every page (as part of the site layout) in the <code>layouts</code> directory. (We&rsquo;ll create the <code>shared</code> directory starting in <a class="ref" href="sign-up#top">Chapter&nbsp;8</a>.) That seems to me a logical division, but putting them all in the <code>shared</code> folder certainly works fine, too.&nbsp;<a class="arrow" href="#fnref:5.8">&uarr;</a></li>
<li id="fn:5.9">In the line <code>SampleApp::Application.routes.draw do</code> you might recognize that the <code>draw</code> method takes a <em>block</em>, a construction we last saw in <a class="ref" href="rails-flavored-ruby#sec:blocks">Section&nbsp;4.3.2</a>.&nbsp;<a class="arrow" href="#fnref:5.9">&uarr;</a></li>
</ol>
</div>




